<div class="animated fadeIn">
  <div class="card">

    <div class="card-header">
      <div class="row">
        <div *ngIf="is_vo_admin || is_facility_manager" class="col-6">


          <button style="margin-right: 5px;margin-left: 5px;margin-top:5px;margin-bottom: 5px"
                  class="btn btn-primary"
                  (click)="toggleTab('own');applyFilter();">Own Clusters
          </button>

          <button *ngIf="is_vo_admin" style="margin-right: 5px;margin-left: 5px;margin-top: 5px;margin-bottom: 5px"
                  class="btn btn-primary"
                  (click)="toggleTab('all');applyFilter();">All Clusters
          </button>
          <button style="margin-right: 5px;margin-left: 5px;margin-top: 5px;margin-bottom: 5px"
                  class="btn btn-primary"
                  (click)="toggleTab('facility');applyFilter();">Clusters of your facilities
          </button>


        </div>
        <div *ngIf="tab=='facility'" class="col-4"><select [(ngModel)]="selectedFacility"
                                                           class="form-control " name="selectedFacility">
          <option *ngFor="  let facility of managerFacilities"
                  [ngValue]="facility">
            {{facility['Facility']}}
          </option>

        </select></div>
      </div>

    </div>
    <div class="row justify-content-end " style="margin-bottom: 5px !important;padding-right: 15px;padding-left: 15px;">
      <div class="col container-fluid" style="margin: 10px 0 0 0;" *ngIf="total_pages > 1">
        <pagination
          [totalItems]="total_items" [itemsPerPage]="items_per_page"
          (pageChanged)="pageChanged($event)" [(ngModel)]="currentPage"
          [boundaryLinks]="true" [maxSize]="total_pages" [rotate]="false" #pagination>
        </pagination>
      </div>
      <div class="input-group  col-3">
        <input id="vm_per_site" class="form-control" style="margin: 10px 0 0 0;"
               name="vm_per_site" placeholder="e.g 3"
               type="number" min="1" max="25" step="1"
               appMinAmount="1" appMaxAmount="25" appInteger
               pattern="^([1-9]|1[012])$" [(ngModel)]="cluster_per_site"
               (ngModelChange)="clusterPerPageChange.next($event)">
        <div class="input-group-append mb-3" style="margin: 10px 0 0 0;"><span class="input-group-text"> VMs per page
                                    </span></div>
      </div>
    </div>

    <div class="container-fluid">
      <div *ngIf="isSearching" id="search_spinner" style="margin:10px; padding:10px;">
        <div class="spinner-border text-primary" style="display:block; margin:auto;"></div>
      </div>

      <ng-container *ngFor="let cluster of clusters">
        <app-clusterinfo [cluster]="cluster"></app-clusterinfo>
      </ng-container>


    </div>
  </div>
</div>


<div bsModal #verifyModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="Label"
     aria-hidden="true"
     id="verify_modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Delete VM</h4>
        <button type="button" class="close" style="cursor: pointer"
                (click)="verifyModal.hide()"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="alert alert-warning" role="alert">
          Are you sure you want to delete {{selectedCluster?.cluster_id}}?
        </div>

      </div>
      <div class="modal-footer">
        <button class="btn  btn-success col-md-4"
                (click)="deleteCluster(selectedCluster);verifyModal.hide();"
                id="confirm_delete_button">
          Yes
        </button>
        <button class="btn  btn-danger col-md-4" type="reset"
                (click)="selectedCluster=null;verifyModal.hide();">Cancel
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

