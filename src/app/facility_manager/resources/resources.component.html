<div *ngIf="isLoaded==false" class="loader"></div>

<div *ngIf="isLoaded" class="animated fadeIn" ng-app style="width: 100%">
    <div class="row">
        <!--/.col-->
        <h1 *ngIf="selectedFacility">Projects Overview: ***REMOVED******REMOVED***selectedFacility['Facility']***REMOVED******REMOVED***


        </h1>
        <div class="card" style="width: 100%">
            <div class="card-header">
                <i class="fa fa-align-justify"></i> Resources

                        <button style="float:right" class="btn btn-primary" (click)="getRamCoreFactors();factorModal.show()">Set
                            Limits</button>


            </div>

            <div><select [(ngModel)]="selectedFacility"
                         (ngModelChange)="isLoaded=false;onChangeSelectedFacility($event);"
                         class="form-control" name="selectedFacility">
                <option *ngFor="  let facility of managerFacilities" [ngValue]="facility">
                    ***REMOVED******REMOVED***facility['Facility']***REMOVED******REMOVED***
                </option>

            </select></div>

            <div class="card-body" style="width: 100%">


                <div class="table-responsive">
                    <table id="contentToConvert"
                           class="table table-striped table-bordered"
                           style="width: 100%">
                        <thead>
                        <tr>
                            <th colspan="5"><h1>Facility: ***REMOVED******REMOVED***selectedFacility['Facility']***REMOVED******REMOVED*** ***REMOVED******REMOVED***today |
                                date:'dd-MM-yyyy'***REMOVED******REMOVED***</h1></th>
                        </tr>
                        </thead>
                        <thead>
                        <tr>
                            <th>***REMOVED******REMOVED***today | date:'dd-MM-yyyy'***REMOVED******REMOVED***</th>
                            <th>***REMOVED******REMOVED***openstackApprovedResources.resource_name***REMOVED******REMOVED***</th>
                            <th>***REMOVED******REMOVED***openstackWFCResources.resource_name***REMOVED******REMOVED***</th>
                            <th>***REMOVED******REMOVED***simpleVmRessource.resource_name***REMOVED******REMOVED***</th>
                            <th>***REMOVED******REMOVED***totalResource.resource_name***REMOVED******REMOVED***</th>
                        </tr>
                        </thead>
                        <tbody>

                        <tr>
                            <th>Ram [GB]</th>
                            <td>***REMOVED******REMOVED***openstackApprovedResources.totalRam***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***openstackWFCResources.totalRam***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***simpleVmRessource.totalRam***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***totalResource.totalRam***REMOVED******REMOVED***</td>
                        </tr>
                        <tr>
                            <th>Cores</th>
                            <td>***REMOVED******REMOVED***openstackApprovedResources.totalCores***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***openstackWFCResources.totalCores***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***simpleVmRessource.totalCores***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***totalResource.totalCores***REMOVED******REMOVED***</td>
                        </tr>
                        <tr>
                            <th>Vms</th>
                            <td>***REMOVED******REMOVED***openstackApprovedResources.totalVms***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***openstackWFCResources.totalVms***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***simpleVmRessource.totalVms***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***totalResource.totalVms***REMOVED******REMOVED***</td>
                        </tr>
                        <tr>
                            <th>Volumes</th>
                            <td>***REMOVED******REMOVED***openstackApprovedResources.totalVolumeCounter***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***openstackWFCResources.totalVolumeCounter***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***simpleVmRessource.totalVolumeCounter***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***totalResource.totalVolumeCounter***REMOVED******REMOVED***</td>
                        </tr>
                        <tr>
                            <th>Volumes Storage [GB]</th>
                            <td>***REMOVED******REMOVED***openstackApprovedResources.totalVolumeLimit***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***openstackWFCResources.totalVolumeLimit***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***simpleVmRessource.totalVolumeLimit***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***totalResource.totalVolumeLimit***REMOVED******REMOVED***</td>
                        </tr>
                        <tr>
                            <th>Object Storage [GB]</th>
                            <td>***REMOVED******REMOVED***openstackApprovedResources.totalObjectStorage***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***openstackWFCResources.totalObjectStorage***REMOVED******REMOVED***</td>
                            <td></td>
                            <td>***REMOVED******REMOVED***totalResource.totalObjectStorage***REMOVED******REMOVED***</td>
                        </tr>
                        <tr>
                            <th>FPGA</th>
                            <td>***REMOVED******REMOVED***openstackApprovedResources.totalFPGA***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***openstackWFCResources.totalFPGA***REMOVED******REMOVED***</td>
                            <td></td>
                            <td>***REMOVED******REMOVED***totalResource.totalFPGA***REMOVED******REMOVED***</td>
                        </tr>
                        <tr>
                            <th>GPU</th>
                            <td>***REMOVED******REMOVED***openstackApprovedResources.totalGPU***REMOVED******REMOVED***</td>
                            <td>***REMOVED******REMOVED***openstackWFCResources.totalGPU***REMOVED******REMOVED***</td>
                            <td></td>
                            <td>***REMOVED******REMOVED***totalResource.totalGPU***REMOVED******REMOVED***</td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </div>
            <div>
                <button (click)="tableToPDF()">Download PDF</button>
                <button (click)="tableToCSV()">Download CSV</button>
            </div>            <!-- DivTable.com -->
        </div>
        <!--/.col-->
    </div>
</div>


<div bsModal #factorModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-info modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Resources Factors</h4>
                <button type="button" class="close" style="cursor: pointer"
                        (click)="factorModal.hide()"
                        aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead>
                        <th>Cores</th>
                        <th>Factor</th>
                        <th>Actions</th>
                        </thead>
                        <tbody>
                        <ng-container
                                *ngFor="let cF of coreFactors">
                            <tr>
                                <td>***REMOVED******REMOVED***cF.cores***REMOVED******REMOVED***</td>
                                <td>***REMOVED******REMOVED***cF.factor***REMOVED******REMOVED***</td>
                                <td><i (click)="deleteCoreFactor(cF.id)" style="cursor: pointer;" class="icon-minus h2"></i></td>
                            </tr>
                        </ng-container>

                        <tr>
                            <td><input type="text" placeholder="Cores" #cores></td>
                            <td><input type="text" placeholder="Factor" #coresFactor></td>
                            <td><i style="cursor: pointer;" (click)="addCoreFactor(cores.value,coresFactor.value);"
                                   class="icon-plus h2"></i></td>
                        </tr>
                        </tbody>
                    </table>

                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-bordered    ">
                        <thead>
                        <th>Ram</th>
                        <th>Factor</th>
                        <th>Actions</th>
                        </thead>
                        <tbody>
                        <ng-container
                                *ngFor="let rF of ramFactors">
                            <tr>
                                <td>***REMOVED******REMOVED***rF.ram***REMOVED******REMOVED***</td>
                                <td>***REMOVED******REMOVED***rF.factor***REMOVED******REMOVED***</td>
                                <td><i (click)="deleteRamFactor(rF.id)" style="cursor: pointer;" class="icon-minus h2"></i></td>

                            </tr>
                        </ng-container>

                        <tr>
                            <td><input type="text" placeholder="Ram" #ram></td>
                            <td><input type="text" placeholder="Factor" #ramFactor></td>
                            <td><i style="cursor: pointer;" (click)="addRamFactor(ram.value,ramFactor.value);" class="icon-plus h2"></i>
                            </td>

                        </tr>

                        </tbody>
                    </table>


                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                            (click)="factorModal.hide()">
                        Close
                    </button>
                </div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>










