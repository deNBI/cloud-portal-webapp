<div *ngIf="  isLoaded_userApplication == false || isLoaded_AllApplication == false"
     class="loader">

</div>
<div *ngIf="isLoaded_userApplication && isLoaded_AllApplication"
     class="animated fadeIn">
    <div class="row">
        <!--/.col-->
        <div class="col-md-8"><h1>Applications Overview</h1></div>
        <div class="col-lg-12">
            <div class="card">
                <div class="card-header">
                    <i class="fa fa-align-justify"></i> Your applications
                </div>
                <div class="card-body" *ngIf="user_applications.length == 0">
                    <div class="alert alert-success" role="alert">
                        <strong>No Applications!</strong> You have no
                        applications in review.
                    </div>
                </div>
                <div *ngIf="user_applications.length > 0" class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th>Project Name</th>
                                <th>Short Name</th>
                                <th>Lifetime</th>
                                <th>Date submitted</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            <ng-container
                                    *ngFor="let application of user_applications">
                                <tr>
                                    <td>***REMOVED******REMOVED*** application.Name ***REMOVED******REMOVED***</td>
                                    <td>***REMOVED******REMOVED***application.Shortname***REMOVED******REMOVED***</td>
                                    <td>***REMOVED******REMOVED*** application.Lifetime ***REMOVED******REMOVED***</td>
                                    <td>***REMOVED******REMOVED*** application.DateSubmitted ***REMOVED******REMOVED***</td>
                                    <td>***REMOVED******REMOVED*** getStatusById(application.Status) ***REMOVED******REMOVED***</td>
                                    <td>

                                      <div class="btn-group-vertical">
                                        <button
                                          (click)="switchCollapseStatus('user_application-' + application.Id);getFacilityProject(application);"
                                          type="button"
                                          class="btn btn-secondary" style="margin: auto auto 5px">
                                          <i class="fa fa-info-circle"></i>&nbsp;
                                          <span
                                            [hidden]="!getCollapseStatus('user_application-' + application.Id)">Show</span><span
                                          [hidden]="getCollapseStatus('user_application-' + application.Id)">Hide</span>
                                          Information
                                        </button>
                                        <button *ngIf="application.Status == application_states.SUBMITTED"
                                                (click)="deleteModal.show();setDeleteId(application.Id)"
                                                type="button"
                                                style="margin: auto auto 5px"
                                                class="btn btn-danger">
                                          Remove Application
                                        </button>
                                        <button
                                          *ngIf="application.Status == application_states.APPROVED || application.Status == application_states.MODIFICATION_DECLINED"
                                          (click)="setSelectedApplication(application);calculateRamCores();extensionModal.show()"
                                          type="button"
                                          class="btn btn-warning"
                                          style="margin: auto auto 5px">
                                          Request Extension/Modification
                                        </button>
                                      </div>
                                    </td>
                                </tr>

                                <tr>
                                    <td [class.collapse_no_margin]="getCollapseStatus('user_application-' + application.Id)"
                                        colspan="6">
                                        <div id="user_application-***REMOVED******REMOVED*** application.Id ***REMOVED******REMOVED***"
                                             [class.collapse]="getCollapseStatus('user_application-' + application.Id)"
                                             class="table-responsive">
                                            <table class="table table-striped" style="width: 80%">
                                                <tr *ngIf="application.Status != application_states.SUBMITTED">
                                                    <td>Facility</td>
                                                    <td>
                                                        ***REMOVED******REMOVED***application.ComputeCenter?.Name***REMOVED******REMOVED***
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED"></td>

                                                </tr>
                                                <tr>
                                                    <td>Dissemination allowed</td>
                                                    <td>
                                                        ***REMOVED******REMOVED***application.Dissemination***REMOVED******REMOVED***
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED"></td>

                                                </tr>
                                                <tr>
                                                    <td>Description</td>
                                                    <td>***REMOVED******REMOVED***application.Description***REMOVED******REMOVED***
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED"></td>
                                                </tr>
                                                <tr>
                                                    <td>Horizon 2020</td>
                                                    <td>
                                                        ***REMOVED******REMOVED***application.Horizon2020***REMOVED******REMOVED***
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED"></td>
                                                </tr>
                                                <tr>
                                                    <td>Comment</td>
                                                    <td>***REMOVED******REMOVED***application.Comment***REMOVED******REMOVED***
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        ***REMOVED******REMOVED***application.ApplicationExtension?.Comment***REMOVED******REMOVED***
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><b>VMs</b>
                                                    </td>
                                                    <td>
                                                        <span> Current: </span>
                                                        ***REMOVED******REMOVED***application.VMsRequested***REMOVED******REMOVED***
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        Requested:
                                                        ***REMOVED******REMOVED***application.ApplicationExtension?.VMsRequested***REMOVED******REMOVED***
                                                    </td>
                                                </tr>
                                                <tr *ngFor="let item of application.CurrentFlavors | keyvalue">
                                                    <td>Flavor: ***REMOVED******REMOVED***item.key***REMOVED******REMOVED***</td>
                                                    <td>***REMOVED******REMOVED***item.value.counter***REMOVED******REMOVED***</td>
                                                    <td *ngIf="application.Status =='modification requested' ">
                                                            <span *ngIf="application.ApplicationExtension?.RequestedFlavors[item.key]">
                                                                ***REMOVED******REMOVED***application.ApplicationExtension?.RequestedFlavors[item.key]?.counter***REMOVED******REMOVED***</span>
                                                        <span *ngIf="!application.ApplicationExtension?.RequestedFlavors[item.key]">
                                                               0</span></td>
                                                </tr>
                                                <ng-container
                                                        *ngFor="let item of application.ApplicationExtension?.RequestedFlavors| keyvalue ">
                                                    <tr *ngIf="!application.CurrentFlavors[item.key]">
                                                        <td>Flavor: ***REMOVED******REMOVED***item.key***REMOVED******REMOVED***</td>
                                                        <td>0</td>
                                                        <td>
                                                            ***REMOVED******REMOVED***application.ApplicationExtension?.RequestedFlavors[item.key]?.counter***REMOVED******REMOVED***


                                                        </td>


                                                    </tr>
                                                </ng-container>

                                                <tr>
                                                    <td>Cores</td>
                                                    <td>***REMOVED******REMOVED***application.TotalCores***REMOVED******REMOVED***
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        ***REMOVED******REMOVED***application.ApplicationExtension?.TotalCores***REMOVED******REMOVED***
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>RAM</td>
                                                    <td>***REMOVED******REMOVED*** application.TotalRam***REMOVED******REMOVED*** GB
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        ***REMOVED******REMOVED***application.ApplicationExtension?.TotalRAM***REMOVED******REMOVED***
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Storage Limit</td>
                                                    <td>***REMOVED******REMOVED***application.VolumeLimit***REMOVED******REMOVED*** GB
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        ***REMOVED******REMOVED***application.ApplicationExtension?.VolumeLimit***REMOVED******REMOVED***
                                                        GB
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Volume Counter</td>
                                                    <td>***REMOVED******REMOVED*** application.VolumeCounter***REMOVED******REMOVED*** volumes
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        ***REMOVED******REMOVED***application.ApplicationExtension?.VolumeCounter***REMOVED******REMOVED*** volumes
                                                    </td>
                                                </tr>
                                                <tr *ngIf="application.OpenStackProject">
                                                    <td>ObjectStorage</td>
                                                    <td>***REMOVED******REMOVED***application.ObjectStorage***REMOVED******REMOVED*** GB
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        ***REMOVED******REMOVED***application.ApplicationExtension?.ObjectStorage***REMOVED******REMOVED***
                                                        GB
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td>OpenStackProject
                                                    </td>
                                                    <td>
                                                        ***REMOVED******REMOVED***application.OpenStackProject***REMOVED******REMOVED***
                                                    </td>
                                                    <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        ***REMOVED******REMOVED***application.OpenStackProject***REMOVED******REMOVED***
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </ng-container>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>

        <div *ngIf="is_vo_admin == true" class="col-lg-12">
            <div class="card">
                <div class="card-header">
                    <i class="fa fa-align-justify"></i> Applications for review
                </div>
                <div class="card-body"
                     *ngIf="!this.activeApplicationsAvailable()">
                    <div class="alert alert-success" role="alert">
                        <strong>No new Applications!</strong> There are no new
                        project applications for review.
                    </div>
                </div>

                <div *ngIf="this.activeApplicationsAvailable()"
                     class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th>Project Name</th>
                                <th>Short Name</th>
                                <th>Date submitted</th>
                                <th>User</th>
                                <th>Institute</th>
                                <th>Compute Center</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            <ng-container
                                    *ngFor="let application of all_applications">
                                <ng-container
                                        *ngIf="application.Status == application_states.SUBMITTED || application.Status == application_states.MODIFICATION_REQUESTED || application.Status == application_states.WAIT_FOR_CONFIRMATION || application.Status == application_states.CONFIRMATION_DENIED">
                                    <tr>
                                        <td>***REMOVED******REMOVED*** application.Name ***REMOVED******REMOVED***</td>
                                        <td>***REMOVED******REMOVED***application.Shortname***REMOVED******REMOVED***</td>
                                        <td>***REMOVED******REMOVED*** application.DateSubmitted ***REMOVED******REMOVED***
                                        </td>
                                        <td style="word-wrap: break-word;min-width: 110px; max-width: 130px; white-space: normal">
                                            ***REMOVED******REMOVED*** application.User ***REMOVED******REMOVED***
                                        </td>
                                        <td>***REMOVED******REMOVED***application.Institute***REMOVED******REMOVED***</td>


                                        <td>
                                            <select
                                                    [style.display]="application.OpenStackProject && (application.Status == application_states.SUBMITTED || application.Status == application_states.CONFIRMATION_DENIED || (!application.ComputeCenter?.FacilityId ))? 'inherit' :'none'"
                                                    class="form-control"
                                                    #selectedComputeCenter>

                                                <option value="undefined" selected> no center
                                                </option>
                                                <option *ngFor="let computeCenter of computeCenters"
                                                        value="***REMOVED******REMOVED***computeCenter.FacilityId***REMOVED******REMOVED***">
                                                    ***REMOVED******REMOVED***computeCenter.Name***REMOVED******REMOVED***
                                                </option>
                                            </select>
                                            <span *ngIf="application.Status != application_states.SUBMITTED">***REMOVED******REMOVED***application.ComputeCenter?.Name***REMOVED******REMOVED***</span>
                                        </td>


                                        <td>
                                          <div class="btn-group">
                                            <button
                                              *ngIf="application.Status == application_states.CONFIRMATION_DENIED || (application.Status == application_states.WAIT_FOR_CONFIRMATION && !application.ComputeCenter?.FacilityId )"
                                              style="margin: auto 2.5px"
                                              (click)="resetNotificationModal();assignGroupToFacility(application.PerunId,application.Id,selectedComputeCenter.value); notificationModal.show();"


                                              type="button"
                                              class="btn btn-secondary">
                                              <i class="fa fa-check"></i>&nbsp;
                                              Assign
                                            </button>
                                            <button
                                              *ngIf="application.Status == application_states.WAIT_FOR_CONFIRMATION && application.ComputeCenter?.FacilityId"
                                              style="margin: auto 2.5px"
                                              (click)="resetNotificationModal();removeApplicationFromFacilityConfirmation(application);"


                                              type="button"
                                              class="btn btn-secondary">
                                              <i class="fa fa-check"></i>&nbsp;
                                              Reassign
                                            </button>
                                            <button
                                              *ngIf="application.Status == application_states.SUBMITTED && application.OpenStackProject"
                                              style="margin: auto 2.5px"
                                              (click)="resetNotificationModal();createOpenStackProjectGroup(application.Shortname, application.Description, application.UserEmail, application.Id,selectedComputeCenter.value); notificationModal.show();"


                                              type="button"
                                              class="btn btn-success">
                                              <i class="fa fa-check"></i>&nbsp;
                                              Approve
                                              & Create
                                            </button>

                                            <button
                                              *ngIf="application.Status == application_states.SUBMITTED && !application.OpenStackProject"
                                              style="margin: auto 2.5px"
                                              (click)="resetNotificationModal();createSimpleVmProjectGroup(application.Shortname, application.Description, application.UserEmail, application.Id,selectedComputeCenter.value); notificationModal.show();"


                                              type="button"
                                              class="btn btn-success">
                                              <i class="fa fa-check"></i>&nbsp;
                                              Approve
                                              & Create
                                            </button>
                                            <button
                                              *ngIf="application.Status == application_states.MODIFICATION_REQUESTED"
                                              style="margin: auto 2.5px"
                                              (click)="setSelectedApplication(application);approveExtension(application);resultModal.show();"
                                              type="button"
                                              class="btn btn-success">
                                              <i class="fa fa-check"></i>&nbsp;
                                              Approve
                                              Modification
                                            </button>

                                            <button *ngIf="application.Status == application_states.SUBMITTED"
                                                    (click)='declineApplication(application.Id)'
                                                    type="button"
                                                    class="btn btn-danger"
                                                    style="margin: auto 2.5px">
                                              <i class="fa fa-close"></i>&nbsp;
                                              Decline
                                            </button>
                                            <button
                                              *ngIf="application.Status == application_states.MODIFICATION_REQUESTED"
                                              type="button"
                                              class="btn btn-danger"
                                              style="margin: auto 2.5px"
                                              (click)="setSelectedApplication(application);declineExtension(application.Id);resultModal.show();">
                                              <i
                                                class="fa fa-close"></i>&nbsp;
                                              Decline Modification
                                            </button>


                                            <button
                                              (click)="switchCollapseStatus('application_review-' + application.Id);  getMemberDetailsByElixirIdIfCollapsed(application.User,'application_review-' + application.Id);"
                                              type="button"
                                              class="btn btn-secondary"
                                              style="margin: auto 2.5px">
                                              <i class="fa fa-info-circle"></i>&nbsp;
                                              <span
                                                [hidden]="!getCollapseStatus('application_review-' + application.Id)">Show</span><span
                                              [hidden]="getCollapseStatus('application_review-' + application.Id)">Hide</span>
                                              Information
                                            </button>
                                          </div>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td [class.collapse_no_margin]="getCollapseStatus('application_review-' + application.Id)"
                                            colspan="6">
                                            <div id="application_review-***REMOVED******REMOVED*** application.Id ***REMOVED******REMOVED***"
                                                 [class.collapse]="getCollapseStatus('application_review-' + application.Id)">
                                                <div class="table-responsive">
                                                    <table class="table table-striped">

                                                        <tr>
                                                            <td>User
                                                                Affiliations
                                                            </td>
                                                            <td>***REMOVED******REMOVED***
                                                                application.UserAffiliations***REMOVED******REMOVED***
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>User Name</td>
                                                            <td>
                                                                ***REMOVED******REMOVED***application_user[application.User]?.name***REMOVED******REMOVED***
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>User Email</td>
                                                            <td>
                                                                ***REMOVED******REMOVED***application_user[application.User]?.email***REMOVED******REMOVED***
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>Description
                                                            </td>
                                                            <td>***REMOVED******REMOVED***
                                                                application.Description
                                                                ***REMOVED******REMOVED***
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>Horizon 2020</td>
                                                            <td>
                                                                ***REMOVED******REMOVED***application.Horizon2020***REMOVED******REMOVED***
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>Dissemination allowed</td>
                                                            <td>
                                                                ***REMOVED******REMOVED***application.Dissemination***REMOVED******REMOVED***
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>Workgroup</td>
                                                            <td>***REMOVED******REMOVED***
                                                                application.Workgroup
                                                                ***REMOVED******REMOVED***
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                OpenStackProject
                                                            </td>
                                                            <td>
                                                                ***REMOVED******REMOVED***application.OpenStackProject***REMOVED******REMOVED***
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>Comment</td>
                                                            <td>***REMOVED******REMOVED***
                                                                application.Comment
                                                                ***REMOVED******REMOVED***
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                                ***REMOVED******REMOVED***application.ApplicationExtension?.Comment***REMOVED******REMOVED***
                                                            </td>

                                                        </tr>
                                                        <tr>
                                                            <td>Lifetime</td>
                                                            <td>***REMOVED******REMOVED***
                                                                application.Lifetime
                                                                ***REMOVED******REMOVED*** months
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                                ***REMOVED******REMOVED***application.ApplicationExtension?.Lifetime
                                                                +
                                                                application.Lifetime***REMOVED******REMOVED***
                                                                months
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><b>VMs</b>
                                                            </td>

                                                            <td>
                                                                <span>Current:</span>
                                                                ***REMOVED******REMOVED***application.VMsRequested***REMOVED******REMOVED***
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                                Requested:
                                                                ***REMOVED******REMOVED***application.ApplicationExtension?.VMsRequested***REMOVED******REMOVED***
                                                            </td>

                                                        </tr>

                                                        <tr *ngFor="let item of application.CurrentFlavors | keyvalue">
                                                            <td>Flavor: ***REMOVED******REMOVED***item.key***REMOVED******REMOVED***</td>
                                                            <td>***REMOVED******REMOVED***item.value.counter***REMOVED******REMOVED***</td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED ">
                                                            <span *ngIf="application.ApplicationExtension?.RequestedFlavors[item.key]">
                                                                ***REMOVED******REMOVED***application.ApplicationExtension?.RequestedFlavors[item.key]?.counter***REMOVED******REMOVED***</span>
                                                                <span *ngIf="!application.ApplicationExtension?.RequestedFlavors[item.key]">
                                                               0</span></td>
                                                        </tr>
                                                        <ng-container
                                                                *ngFor="let item of application.ApplicationExtension?.RequestedFlavors| keyvalue ">
                                                            <tr *ngIf="!application.CurrentFlavors[item.key]">
                                                                <td>Flavor: ***REMOVED******REMOVED***item.key***REMOVED******REMOVED***</td>
                                                                <td>0</td>
                                                                <td>
                                                                    ***REMOVED******REMOVED***application.ApplicationExtension?.RequestedFlavors[item.key]?.counter***REMOVED******REMOVED***


                                                                </td>


                                                            </tr>
                                                        </ng-container>

                                                        <tr>
                                                            <td>Total Cores</td>
                                                            <td>***REMOVED******REMOVED***
                                                                application.TotalCores
                                                                ***REMOVED******REMOVED***


                                                            </td>

                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                                ***REMOVED******REMOVED***application.ApplicationExtension?.TotalCores***REMOVED******REMOVED***
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>Total RAM</td>
                                                            <td>***REMOVED******REMOVED***
                                                                application.TotalRam***REMOVED******REMOVED*** GB
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                                ***REMOVED******REMOVED***application.ApplicationExtension?.TotalRAM***REMOVED******REMOVED***
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>Storage Limit
                                                            </td>
                                                            <td>***REMOVED******REMOVED***
                                                                application.VolumeLimit
                                                                ***REMOVED******REMOVED*** GB
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                                ***REMOVED******REMOVED***application.ApplicationExtension?.VolumeLimit***REMOVED******REMOVED***
                                                                GB
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>Volume
                                                                Counter
                                                            </td>
                                                            <td>***REMOVED******REMOVED***
                                                                application.VolumeCounter
                                                                ***REMOVED******REMOVED*** volumes
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                                ***REMOVED******REMOVED***application.ApplicationExtension?.VolumeCounter***REMOVED******REMOVED*** volumes
                                                            </td>
                                                        </tr>
                                                        <tr *ngIf="application.OpenStackProject">
                                                            <td>ObjectStorage
                                                            </td>
                                                            <td>***REMOVED******REMOVED***
                                                                application.ObjectStorage
                                                                ***REMOVED******REMOVED*** GB
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                                ***REMOVED******REMOVED***application.ApplicationExtension?.ObjectStorage***REMOVED******REMOVED***
                                                                GB
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>Last status
                                                                changed
                                                            </td>
                                                            <td>***REMOVED******REMOVED***
                                                                application.DateStatusChanged
                                                                ***REMOVED******REMOVED***
                                                            </td>
                                                            <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                            </td>
                                                        </tr>


                                                    </table>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </ng-container>
                            </ng-container>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>

        <div *ngIf="is_vo_admin == true" class="col-lg-12">
            <div class="card">
                <div class="card-header">
                    <i class="fa fa-align-justify"></i> Application history
                </div>
                <div class="card-body" *ngIf="all_applications.length == 0">
                    <div class="alert alert-warning" role="alert">
                        <strong>No Applications!</strong> There are no
                        applications at all!
                    </div>
                </div>

                <div *ngIf="all_applications.length > 0" class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>

                                <th>Project Name</th>
                                <th>Short Name</th>
                                <th>Date submitted (d/m/y)</th>
                                <th>User</th>
                                <th>Institute</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            <ng-container
                                    *ngFor="let application of all_applications">
                                <ng-container *ngIf="application.Status != application_states.SUBMITTED">
                                    <tr [ngStyle]="***REMOVED***'color':lifeTimeReached(application.Lifetime,application.DaysRunning,application.DateStatusChanged)***REMOVED***">
                                        <td>***REMOVED******REMOVED*** application.Name ***REMOVED******REMOVED***</td>
                                        <td>***REMOVED******REMOVED***application.Shortname***REMOVED******REMOVED***</td>
                                        <td>***REMOVED******REMOVED*** application.DateSubmitted ***REMOVED******REMOVED***
                                        </td>
                                        <td>***REMOVED******REMOVED*** application.User ***REMOVED******REMOVED***</td>
                                        <td>***REMOVED******REMOVED*** application.Institute ***REMOVED******REMOVED***</td>
                                        <td>***REMOVED******REMOVED***
                                            getStatusById(application.Status)
                                            ***REMOVED******REMOVED***
                                        </td>
                                        <td>
                                          <div class="btn-group">
                                            <button
                                              (click)="switchCollapseStatus('application_history-' + application.Id);getFacilityProject(application);"
                                              type="button"
                                              class="btn btn-secondary"
                                              style="margin: auto 2.5px">
                                              <i class="fa fa-info-circle"></i>&nbsp;
                                              <span
                                                [hidden]="!getCollapseStatus('application_history-' + application.Id)"
                                              >Show</span><span
                                              [hidden]="getCollapseStatus('application_history-' + application.Id)"
                                              style="margin-left: 5px">Hide</span>
                                              Information
                                            </button>
                                            <button (click)="deleteModal.show();setDeleteId(application.Id)"
                                                    type="button"
                                                    class="btn btn-danger"
                                                    style="margin: auto 2.5px">
                                              Remove Application
                                            </button>
                                            <button
                                              *ngIf="application.Status != application_states.SUBMITTED &&  application.Status != application_states.TERMINATED"
                                              (click)="setSelectedApplication(application);terminateModal.show();"
                                              type="button"
                                              class="btn btn-warning"
                                              style="margin: auto 2.5px">
                                              Terminate Application
                                            </button>
                                          </div>
                                        </td>
                                    </tr>
                                    <tr [ngStyle]="***REMOVED***'color':lifeTimeReached(application.Lifetime,application.DaysRunning)***REMOVED***">
                                        <td [class.collapse_no_margin]="getCollapseStatus('application_history-' + application.Id)"
                                            colspan="6">
                                            <div id="application_history-***REMOVED******REMOVED*** application.Id ***REMOVED******REMOVED***"
                                                 [class.collapse]="getCollapseStatus('application_history-' + application.Id)">
                                                <div>
                                                  <div class="table-responsive">
                                                    <table class="table table-striped">
                                                      <tr>
                                                        <td>Description
                                                        </td>
                                                        <td>***REMOVED******REMOVED***
                                                          application.Description
                                                          ***REMOVED******REMOVED***
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        </td>
                                                      </tr>
                                                      <tr>
                                                        <td>Horizon 2020</td>
                                                        <td>
                                                          ***REMOVED******REMOVED***application.Horizon2020***REMOVED******REMOVED***
                                                        </td>
                                                      </tr>
                                                      <tr>
                                                        <td>Dissemination allowed</td>
                                                        <td>
                                                          ***REMOVED******REMOVED***application.Dissemination***REMOVED******REMOVED***
                                                        </td>
                                                      </tr>

                                                      <tr>
                                                        <td>Workgroup</td>
                                                        <td>***REMOVED******REMOVED***
                                                          application.Workgroup
                                                          ***REMOVED******REMOVED***
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        </td>
                                                      </tr>
                                                      <tr>
                                                        <td>
                                                          OpenStackProject
                                                        </td>
                                                        <td>
                                                          ***REMOVED******REMOVED***application.OpenStackProject***REMOVED******REMOVED***
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        </td>
                                                      </tr>

                                                      <tr>
                                                        <td>Comment</td>
                                                        <td>***REMOVED******REMOVED***
                                                          application.Comment
                                                          ***REMOVED******REMOVED***
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                          ***REMOVED******REMOVED***application.ApplicationExtension?.Comment***REMOVED******REMOVED***
                                                        </td>

                                                      </tr>
                                                      <tr>
                                                        <td>Lifetime</td>
                                                        <td>***REMOVED******REMOVED***
                                                          application.Lifetime
                                                          ***REMOVED******REMOVED*** months
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                          ***REMOVED******REMOVED***application.ApplicationExtension?.Lifetime
                                                        +
                                                        application.Lifetime***REMOVED******REMOVED***
                                                          months
                                                        </td>
                                                      </tr>
                                                      <tr>
                                                        <td><b>VMs</b>
                                                        </td>

                                                        <td>
                                                          Current:
                                                          ***REMOVED******REMOVED***application.VMsRequested***REMOVED******REMOVED***
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED ">
                                                          Requested:
                                                          ***REMOVED******REMOVED***application.ApplicationExtension?.VMsRequested***REMOVED******REMOVED***
                                                        </td>


                                                      </tr>

                                                      <tr *ngFor="let item of application.CurrentFlavors | keyvalue">
                                                        <td>Flavor: ***REMOVED******REMOVED***item.key***REMOVED******REMOVED***</td>
                                                        <td>***REMOVED******REMOVED***item.value.counter***REMOVED******REMOVED***</td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED ">
                                                            <span
                                                              *ngIf="application.ApplicationExtension?.RequestedFlavors[item.key]">
                                                                ***REMOVED******REMOVED***application.ApplicationExtension?.RequestedFlavors[item.key]?.counter***REMOVED******REMOVED***</span>
                                                          <span
                                                            *ngIf="!application.ApplicationExtension?.RequestedFlavors[item.key]">
                                                               0</span></td>
                                                      </tr>
                                                      <ng-container
                                                        *ngFor="let item of application.ApplicationExtension?.RequestedFlavors| keyvalue ">
                                                        <tr *ngIf="!application.CurrentFlavors[item.key]">
                                                          <td>Flavor: ***REMOVED******REMOVED***item.key***REMOVED******REMOVED***</td>
                                                          <td>0</td>
                                                          <td>
                                                            ***REMOVED******REMOVED***application.ApplicationExtension?.RequestedFlavors[item.key]?.counter***REMOVED******REMOVED***


                                                          </td>


                                                        </tr>
                                                      </ng-container>


                                                      <tr>
                                                        <td>Total Cores</td>
                                                        <td>***REMOVED******REMOVED***application.TotalCores
                                                          ***REMOVED******REMOVED***
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                          ***REMOVED******REMOVED***application.ApplicationExtension?.TotalCores***REMOVED******REMOVED***
                                                        </td>
                                                      </tr>
                                                      <tr *ngIf="application.OpenStackProject">
                                                        <td>Total RAM</td>
                                                        <td>***REMOVED******REMOVED***
                                                          application.TotalRam***REMOVED******REMOVED*** GB
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                          ***REMOVED******REMOVED***application.ApplicationExtension?.TotalRAM***REMOVED******REMOVED***
                                                        </td>
                                                      </tr>
                                                      <tr>
                                                        <td>Storage Limit
                                                        </td>
                                                        <td>***REMOVED******REMOVED***
                                                          application.VolumeLimit
                                                          ***REMOVED******REMOVED*** GB
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                          ***REMOVED******REMOVED***application.ApplicationExtension?.VolumeLimit***REMOVED******REMOVED***
                                                          GB
                                                        </td>
                                                      </tr>
                                                      <tr>
                                                        <td>Volume
                                                          Counter
                                                        </td>
                                                        <td>***REMOVED******REMOVED***
                                                          application.VolumeCounter
                                                          ***REMOVED******REMOVED*** volumes
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                          ***REMOVED******REMOVED***application.ApplicationExtension?.VolumeCounter***REMOVED******REMOVED*** volumes
                                                        </td>
                                                      </tr>
                                                      <tr *ngIf="application.OpenStackProject">
                                                        <td>ObjectStorage
                                                        </td>
                                                        <td>***REMOVED******REMOVED***
                                                          application.ObjectStorage
                                                          ***REMOVED******REMOVED*** GB
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                          ***REMOVED******REMOVED***application.ApplicationExtension?.ObjectStorage***REMOVED******REMOVED***
                                                          GB
                                                        </td>
                                                      </tr>
                                                      <!--tr *ngIf="application.OpenStackProject">
                                                          <td>Special Hardware
                                                          </td>
                                                          <td><span
                                                                  style="margin-right: 5px;"
                                                                  class="badge badge-primary"
                                                                  *ngFor="let sh of application.SpecialHardware">***REMOVED******REMOVED*** sh["special_hardware_name"] ***REMOVED******REMOVED***</span>
                                                          </td>
                                                          <td *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                     <span style="margin-right: 5px;"
                                                           class="badge badge-primary"
                                                           *ngFor="let sh of application.ApplicationExtension?.SpecialHardware">***REMOVED******REMOVED*** sh ***REMOVED******REMOVED***</span>
                                                          </td>
                                                      </tr-->

                                                      <tr>
                                                        <td>Last status
                                                          changed
                                                        </td>
                                                        <td>***REMOVED******REMOVED***
                                                          application.DateStatusChanged
                                                          ***REMOVED******REMOVED***
                                                        </td>
                                                        <td
                                                          *ngIf="application.Status == application_states.MODIFICATION_REQUESTED">
                                                        </td>
                                                      </tr>
                                                      <tr *ngIf="application.Status == application_states.APPROVED">
                                                        <td>DaysRunning
                                                        </td>

                                                        <td>
                                                          ***REMOVED******REMOVED***application.DaysRunning***REMOVED******REMOVED***
                                                        </td>

                                                      </tr>
                                                      <tr *ngIf="application.ComputeCenter">

                                                        <td>Facility
                                                          Details
                                                        </td>
                                                        <td>
                                                          <ul *ngIf="application.ComputeCenter.Name">
                                                            <li *ngIf="application.OpenStackProject">
                                                              <a
                                                                target="_blank"
                                                                href="application.ComputeCenter.Login">Login:
                                                                ***REMOVED******REMOVED***application.ComputeCenter.Login***REMOVED******REMOVED***</a>
                                                            </li>
                                                            <li>
                                                              Support:
                                                              ***REMOVED******REMOVED***application.ComputeCenter.Support***REMOVED******REMOVED***
                                                            </li>

                                                            <!--button (click)="verifyModal.show();UserModalFacilityDetails=project.ComputeCenterDetails;UserModalFacility=project.ComputeCenter;"
                                                                    class="btn btn-primary">Set your OpenStack API password
                                                            </button-->


                                                          </ul>
                                                        </td>

                                                      </tr>

                                                    </table>
                                                  </div>
                                                </div>

                                            </div>
                                        </td>
                                    </tr>

                                </ng-container>


                            </ng-container>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
        <!--/.col-->
    </div>
</div>

<div bsModal #notificationModal="bs-modal" class="modal fade" tabindex="-1"
     role="dialog" aria-labelledby="Label"
     aria-hidden="true">
    <div class="modal-dialog" role="document"
         [ngClass]="notificationClientInfo.length > 0 ? 'modal-lg':''">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">***REMOVED******REMOVED*** notificationModalTitle ***REMOVED******REMOVED***</h4>
                <button type="button" class="close" style="cursor:pointer"
                        (click)="notificationModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="alert alert-***REMOVED******REMOVED*** notificationModalType ***REMOVED******REMOVED***"
                     role="alert">
                    ***REMOVED******REMOVED*** notificationModalMessage ***REMOVED******REMOVED***
                </div>
                <div *ngIf="notificationClientInfo.length > 0">
                    <div *ngFor="let c of notificationClientInfo" class="table-responsive">
                        <br>
                        <p>Client: ***REMOVED******REMOVED***c.location***REMOVED******REMOVED***</p>
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <td></td>
                                <td>Assigned Ressources</td>
                                <td>Max Ressources</td>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>VMs</td>
                                <td>***REMOVED******REMOVED***c.assignedVMs***REMOVED******REMOVED***</td>
                                <td>***REMOVED******REMOVED***c.maxVMs***REMOVED******REMOVED***</td>
                            </tr>
                            <tr>
                                <td>Volumes</td>
                                <td>***REMOVED******REMOVED***c.assignedVolumes***REMOVED******REMOVED***</td>
                                <td>***REMOVED******REMOVED***c.maxVolumes***REMOVED******REMOVED***</td>
                            </tr>
                            <tr>
                                <td>Volume Storage</td>
                                <td>***REMOVED******REMOVED***c.assignedVolumesStorage***REMOVED******REMOVED***</td>
                                <td>***REMOVED******REMOVED***c.maxVolumeLimit***REMOVED******REMOVED***</td>
                            </tr>
                            </tbody>
                        </table>


                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button *ngIf="notificationModalIsClosable == true"
                        type="button"
                        (click)="resetNotificationModal();notificationModal.hide();" type="reset"
                        class="btn  btn-secondary"> Close
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div bsModal #deleteModal="bs-modal" class="modal fade" tabindex="-1"
     role="dialog" aria-labelledby="Label"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Delete Application</h4>
                <button type="button" class="close" style="cursor:pointer"
                        (click)="deleteModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <div class="alert alert-warning" role="alert">
                    Are you sure you want to remove this application?
                </div>

            </div>
            <div class="modal-footer">
                <button class="btn  btn-success col-md-4"
                        (click)="deleteApplication(deleteId);deleteModal.hide();notificationModal.show()">
                    Yes
                </button>
                <button class="btn  btn-danger col-md-4" type="reset"
                        (click)="deleteModal.hide()">Cancel
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div bsModal #terminateModal="bs-modal" class="modal fade" tabindex="-1"
     role="dialog" aria-labelledby="Label"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Terminate Application</h4>
                <button type="button" class="close" style="cursor:pointer"
                        (click)="terminateModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <div class="alert alert-warning" role="alert">
                    Are you sure you want to terminate this application?
                </div>

            </div>
            <div class="modal-footer">
                <button class="btn  btn-success col-md-4"
                        (click)="terminateProject(selectedApplication);terminateModal.hide();notificationModal.show()">
                    Yes
                </button>
                <button class="btn  btn-danger col-md-4" type="reset"
                        (click)="terminateModal.hide()">Cancel
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div bsModal #extensionModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="Label"
     aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Modification/Extension request for ***REMOVED******REMOVED***selectedApplication?.Shortname***REMOVED******REMOVED***</h4>
                <button type="button" class="close" style="cursor: pointer"
                        (click)="extensionModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <div class="alert alert-info">
                    <strong>Please be aware:</strong>
                    If your last renewal or initial application was dated before flavor-categories
                    where introduced, the data which is shown on the left side of the form might be
                    misleading.
                    This does not change the modification-request-process as it only
                    serves as an additional information. You are only able to pick flavors which are
                    currently available.
                    <br><br>
                    The number of flavors, GBs of storage and storage volumes which you enter within
                    this request will be the numbers you will actually get.
                    These numbers <strong>will not be added</strong> to your current numbers, but
                    will <strong>replace them</strong>.
                </div>
                <form id="application_form" #f="ngForm" (ngSubmit)="onSubmit(f)"
                      class="form-horizontal">


                    <div class="form-group row">

                            <label class="col-md-4 form-control-label" for="textarea-input">
                                <strong>Lifetime* <i class="icon-question" data-toggle="tooltip"
                                                     title="Current timespan of your project. You can extend your project by a maximum of 12 months">
                                </i>
                                </strong>
                            </label>


                        <div class="col">
                            <div class="input-group">
                                <input class="form-control"
                                       name="project_application_lifetime" placeholder="NDA"
                                       type="text" value="***REMOVED******REMOVED***showLifetime(selectedApplication)***REMOVED******REMOVED***"
                                       disabled>

                            </div>
                            <span class="help-block">Current lifetime</span>
                        </div>

                        <div class="col">
                            <div class="input-group">
                                <input class="form-control"
                                       id="id_project_application_renewal_lifetime"
                                       name="project_application_renewal_lifetime"
                                       placeholder="e.g 3"
                                       type="number" min="0" max="12" step="1" ngModel required
                                       appInteger appMinAmount="0" appMaxAmount="12"
                                       [ngClass]="***REMOVED***
                                'is-invalid': f.controls.project_application_renewal_lifetime?.invalid && (f.controls.project_application_renewal_lifetime?.dirty || f.controls.project_application_renewal_lifetime?.touched),
                                'is-valid': f.controls.project_application_renewal_lifetime?.valid && (f.controls.project_application_renewal_lifetime?.dirty || f.controls.project_application_renewal_lifetime?.touched)
                                ***REMOVED***">
                              <div class="input-group-append">
                                <span class="input-group-text"> months</span>
                              </div>
                            </div>
                            <span class="help-block">Number of months you want to extend the project</span>
                        </div>
                    </div>

                    <div class="form-group row">
                        <h6 class="col-md-8 form-control-label">Resources*
                            <i data-balloon="Select the number of Virtual Machines you want to run of each specific flavour"
                               data-balloon-pos="down">
                                <i class="icon-question"></i></i>
                        </h6>
                    </div>


                    <div>
                        <div *ngFor="let t of typeList">
                            <div *ngIf="selectedApplication?.OpenStackProject || checkIfTypeGotSimpleVmFlavor(t)" class="card">

                                <div (click)="collapseList[typeList.indexOf(t)] = !collapseList[typeList.indexOf(t)]"
                                     style="cursor: pointer;" id="flavor-card" class="card-header">


                                    ***REMOVED******REMOVED***t.long_name***REMOVED******REMOVED***
                                    <i *ngIf="collapseList[typeList.indexOf(t)]"
                                       style="float: right;font-size: 25px"
                                       class="icon-arrow-up"></i>
                                    <i *ngIf="!collapseList[typeList.indexOf(t)]"
                                       style="float: right;font-size: 25px"
                                       class="icon-arrow-down"></i>


                                </div>
                                <div *ngIf="collapseList[typeList.indexOf(t)]" class="form-group card-body">
                                    <div *ngFor="let fl of flavorList" class="form-group row">
                                        <div
                                                *ngIf="fl.type.shortcut == t.shortcut && (fl.simple_vm || selectedApplication?.OpenStackProject)"
                                             class="form-group row">
                                            <label class="col-md-4 form-control-label"><strong>***REMOVED******REMOVED***fl.name***REMOVED******REMOVED***</strong><br>
                                                Number of cores: ***REMOVED******REMOVED***fl.vcpus***REMOVED******REMOVED***<br>
                                                RAM: ***REMOVED******REMOVED***fl.ram***REMOVED******REMOVED*** GB</label>
                                            <div class="col">
                                                <div class="input-group">
                                                    <input class="form-control"
                                                           name="project_application_***REMOVED******REMOVED***fl.name***REMOVED******REMOVED***_old"
                                                           type="text"
                                                           value="***REMOVED******REMOVED***selectedApplication?.CurrentFlavors[fl.name]?.counter***REMOVED******REMOVED***"
                                                           placeholder="NDA" disabled>
                                                  <div class="input-group-append"><span class="input-group-text"> VMs</span></div>
                                                </div>
                                                <span class="help-block">Currently approved of this type </span>
                                            </div>
                                            <div class="col">
                                                <div class="input-group">
                                                    <input class="form-control"
                                                           (change)="valuesChanged(f)"
                                                           id="project_application_***REMOVED******REMOVED***fl.name***REMOVED******REMOVED***"
                                                           name="project_application_***REMOVED******REMOVED***fl.name***REMOVED******REMOVED***"
                                                           type="number" min="0" step="1"
                                                           placeholder="e.g 1"
                                                           [ngModel]="selectedApplication?.CurrentFlavors[fl.name]?.counter"
                                                           #name = "ngModel"
                                                           appMinAmount="0" appIntegerOrNull
                                                           [ngClass]="***REMOVED***
                                'is-invalid': name?.invalid,
                                'is-valid': name?.valid
                                ***REMOVED***">
                                                  <div class="input-group-append"><span class="input-group-text"> VMs</span></div>
                                                </div>
                                                <span class="help-block">Number of VMs you would like to run in the future</span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>


                    <div class="form-group row">
                        <label class="col-md-4 form-control-label" for="textarea-input"><strong>Storage
                            Limit*
                            <i
                                    data-balloon="Storage limit is the sum of extra storage provided by volumes."
                                    data-balloon-pos="down" data-balloon-length="medium"><i
                                    class="icon-question"
                                    style="cursor: pointer;"></i></i></strong></label>
                        <div class="col">
                            <div class="input-group">
                                <input class="form-control"
                                       name="project_application_renewal_volume_limit"
                                       value="***REMOVED******REMOVED***selectedApplication?.VolumeLimit***REMOVED******REMOVED***"
                                       placeholder="NDA"
                                       type="text" disabled>
                              <div class="input-group-append"><span class="input-group-text"> GB
                                    </span></div>
                            </div>
                            <span class="help-block">Current extra storage</span>
                        </div>
                        <div class="col">
                            <div class="input-group">
                                <input class="form-control"
                                       id="id_project_application_renewal_volume_limit"
                                       name="project_application_renewal_volume_limit"
                                       placeholder="e.g. 20"
                                       value="***REMOVED******REMOVED***selectedApplication?.VolumeLimit***REMOVED******REMOVED***"
                                       type="number" min="1" step="1" [ngModel]="20"
                                       appMinAmount="1" appInteger
                                       [ngClass]="***REMOVED***
                                'is-invalid': f.controls.project_application_renewal_volume_limit?.invalid,
                                'is-valid': f.controls.project_application_renewal_volume_limit?.valid
                                ***REMOVED***">
                              <div class="input-group-append"><span class="input-group-text"> GB
                                    </span></div>
                            </div>
                            <span class="help-block">How much extra storage do you need in the future?</span>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label class="col-md-4 form-control-label" for="textarea-input"><strong>Number
                            of storage
                            volumes*
                            <i data-balloon="Number of volumes allowed to create. The sum of the volumes size equals the value provided in the storage limit field."
                               data-balloon-pos="down" data-balloon-length="large"><i
                                    class="icon-question"
                                    style="cursor: pointer;"></i></i></strong></label>
                        <div class="col">
                            <div class="input-group">
                                <input required class="form-control"
                                       name="project_application_volume_counter"
                                       placeholder="NDA"
                                       value="***REMOVED******REMOVED***selectedApplication?.VolumeCounter***REMOVED******REMOVED***"
                                       type="text" disabled>
                            </div>
                            <span class="help-block">Current number of storage volumes</span>
                        </div>

                        <div class="col">
                            <div class="input-group">
                                <input required class="form-control"
                                       id="id_project_application_renewal_volume_counter"
                                       name="project_application_renewal_volume_counter"
                                       placeholder="e.g. 20"
                                       type="number" min="0" step="1"
                                       [ngModel]="selectedApplication?.VolumeCounter"
                                       appMinAmount="0" appInteger
                                       [ngClass]="***REMOVED***
                                'is-invalid': f.controls.project_application_renewal_volume_counter?.invalid,
                                'is-valid': f.controls.project_application_renewal_volume_counter?.valid
                                ***REMOVED***">
                            </div>
                            <span class="help-block">How many storage volumes do you need in the future?</span>
                        </div>
                    </div>

                    <div *ngIf="selectedApplication?.OpenStackProject" class="form-group row">
                        <label class="col-md-4 form-control-label" for="textarea-input"><strong>Object
                            Storage* </strong><i
                                data-balloon="Object storage is a method of storing data that does not use a directory tree internally. Object storage combines files with metadata and places it in a flat structure."
                                data-balloon-pos="down" data-balloon-length="large"><i
                                class="icon-question"
                                style="cursor: pointer;"></i></i></label>

                        <div class="col">
                            <div class="input-group">
                                <input class="form-control"
                                       name="project_application_object_storage"
                                       placeholder="NDA"
                                       value="***REMOVED******REMOVED***selectedApplication?.ObjectStorage***REMOVED******REMOVED***"
                                       type="text" disabled>
                              <div class="input-group-append"><span class="input-group-text"> GB
                                    </span></div>
                            </div>
                            <span class="help-block">Current Object Storage capacity</span>
                        </div>

                        <div *ngIf="selectedApplication?.OpenStackProject" class="col">
                            <div class="input-group">
                                <input class="form-control"
                                       id="id_project_application_renewal_object_storage"
                                       name="project_application_renewal_object_storage"
                                       placeholder="e.g. 8"
                                       value="***REMOVED******REMOVED***selectedApplication?.ObjectStorage***REMOVED******REMOVED***"
                                       type="number" min="0" step="1" [ngModel]="0"
                                       appInteger appMinAmount="0" required
                                       [ngClass]="***REMOVED***
                                'is-invalid': f.controls.project_application_renewal_object_storage?.invalid ,
                                'is-valid': f.controls.project_application_renewal_object_storage?.valid
                                ***REMOVED***">
                              <div class="input-group-append"><span class="input-group-text"> GB
                                    </span></div>
                            </div>
                            <span class="help-block">How much Object Storage do you need in the future?</span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-4 form-control-label"
                               for="text-input"><strong>Comment</strong></label>
                        <div class="col-md-8">
                <textarea type="text" id="id_project_application_renewal_comment"
                          name="project_application_renewal_comment" class="form-control"
                          maxlength="8192"
                          placeholder='' [ngModel]="selectedApplication?.Comment"></textarea>
                            <span class="help-block">Additional information you want to share?</span>
                        </div>
                    </div>


                    <strong>
                        <div class="form-group row">
                            <label #corenumbers id="corenumbers" class="col">Number of total
                                cores: ***REMOVED******REMOVED***totalNumberOfCores***REMOVED******REMOVED***</label>
                        </div>
                        <div class="form-group row">
                            <label #ramnumbers id="ramnumbers" class="col">Amount of total
                                RAM: ***REMOVED******REMOVED***totalRAM***REMOVED******REMOVED*** </label>
                        </div>
                    </strong>


                </form>
                <div *ngIf="f.invalid" class=" form-group row alert alert-warning">
                    Some required fields are incorrect or not filled in yet.
                    Please check if all required (*) fields are filled in correctly.

                </div>


                <div class="modal-footer">
                    <div class="label">
                        By submitting this application you agree to the cloud usage policy.
                    </div>
                    <button type="button" class="btn  btn-primary"
                            form="application_form"
                            (click)="extension_request=true;filterEnteredData(f); submitModal.show();"
                            [disabled]="f.invalid"><i
                            class="fa fa-dot-circle-o">

                    </i>
                        Submit
                    </button>
                    <button type="button" class="btn btn-danger"
                            (click)="extensionModal.hide(); unsetValues('corenumbers', 'ramnumbers')">
                        Close
                    </button>

                </div>

            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
</div>

<div bsModal #submitModal="bs-modal" class="modal fade" tabindex="-1"
     role="dialog" aria-labelledby="Label"
     aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">***REMOVED******REMOVED***projectName***REMOVED******REMOVED***</h4>
                <button type="button" class="close" style="cursor: pointer;"
                        (click)="submitModal.hide()"
                        data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>

            </div>
            <div class="modal-body">
                <div class="alert alert-info">
                    <strong>Please check the data you have entered and confirm your application
                        below.</strong><br>
                    If the entered data mismatches with your requirements cancel this confirmation
                    and take changes.
                </div>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <tr *ngFor="let str of valuesToConfirm">
                            <td>***REMOVED******REMOVED***str***REMOVED******REMOVED***</td>
                        </tr>
                        <tr>
                            <td><strong>Number of cores in total:
                                ***REMOVED******REMOVED***totalNumberOfCores.toString()***REMOVED******REMOVED***</strong></td>
                        </tr>
                        <tr>
                            <td><strong>Value of RAM in total: ***REMOVED******REMOVED***totalRAM.toString()***REMOVED******REMOVED*** GBs</strong>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>


            <div class="modal-footer">


                <button class="btn btn-success col-md4" type="button"
                        (click)="resultModal.show(); extensionModal.hide(); submitModal.hide();onSubmit(f);">Confirm Application
                </button>
                <button class="btn  btn-primary col-md-4" type="reset"
                        (click)="submitModal.hide();">Cancel
                </button>

            </div>
        </div><!-- /.modal-content -->L
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div bsModal #resultModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="Label"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" *ngIf="extension_status == 0">
                    Waiting </h4>
                <h4 class="modal-title" *ngIf="extension_status == 1"> Success </h4>
                <h4 class="modal-title" *ngIf="extension_status == 2"> Error </h4>
                <button type="button" class="close" style="cursor: pointer"
                        (click)="resultModal.hide();extension_status= 0;removeModalOpen();"
                        aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <div class="alert alert-info" role="alert" *ngIf="extension_status==0">
                    Waiting... <i class="fa fa-spinner fa-spin"
                                  style="font-size:24px"></i>
                </div>


                <div class="alert alert-success" role="alert" *ngIf="extension_status == 1">

                    Modify request successfully submitted!
                </div>
                <div class="alert alert-success" role="alert" *ngIf="extension_status == 3">
                    Modify request successfully approved!
                </div>
                <div class="alert alert-success" role="alert" *ngIf="extension_status == 4">
                    Modify request successfully declined!
                </div>
                <div class="alert alert-success" role="alert" *ngIf="extension_status == 5">
                    Modify request successfully approved and forwarded to facility!
                </div>

                <div class="alert alert-warning" role="alert" *ngIf="extension_status == 2">
                    An error occured.

                </div>


                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                            (click)="resultModal.hide();extension_status= 0;removeModalOpen();">
                        Close
                    </button>
                </div>

            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
</div>
