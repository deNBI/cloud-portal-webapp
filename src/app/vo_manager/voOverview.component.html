<div class="animated fadeIn" ng-app>
    <div class="row">
        <!--/.col-->

        <div class="col-lg-12">
            <button (click)="emailModal.show()" type="button " class="btn btn-secondary"
                    style="margin-bottom: auto;margin-left:auto; margin-top: auto"><i class="icon-envelope-letter"></i>
                Send newsletter ({{newsletterSubscriptionCounter}})
            </button>
               </div>
</div>
</div>





<div bsModal #emailModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Label"
     aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"> Send email to all members of
                    the vo</h4>
                <button type="button" class="close" (click)="emailModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="col-md-12 control-label" for="Subject">Email subject</label>
                    <div class="col-md-12">
                        <input id="Subject" name="Subject" placeholder="Subject" class="form-control input-md"
                               [(ngModel)]="emailSubject" type="text">

                    </div>
                </div>

                <!-- Textarea -->
                <div class="form-group">
                    <label class="col-md-12 control-label" for="text">Email text</label>
                    <div class="col-md-12">
                        <textarea class="form-control" id="text" name="text" [(ngModel)]="emailText"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" (click)="emailModal.hide(); verifyModal.show()">Send email
                </button>
                <button type="button" class="btn btn-secondary" (click)="emailModal.hide();resetEmailModal()">Close
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div bsModal #verifyModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Label"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Send email</h4>
            </div>
            <div class="modal-body">

                <div class="alert alert-warning" role="alert">
                    Are you sure you want to send this email to all members of the vo?
                </div>

            </div>
            <div class="modal-footer">
                <button class="btn  btn-success col-md-4"
                        (click)="sendMailToVo(emailSubject,emailText);verifyModal.hide();resetEmailModal();successModal.show()">
                    Yes
                </button>
                <button class="btn  btn-danger col-md-4" type="reset"
                        (click)="verifyModal.hide();emailModal.show()">Cancel
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div bsModal #successModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Label"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" *ngIf="emailStatus == 0"> Waiting </h4>
                <h4 class="modal-title" *ngIf="emailStatus == 1"> Success </h4>
                <h4 class="modal-title" *ngIf="emailStatus == 2"> Error </h4>
            </div>
            <div class="modal-body">
                <div class="alert alert-info" role="alert" *ngIf="emailStatus == 0">
                    Sending the email. <i class="fa fa-spinner fa-spin" style="font-size:24px"></i>
                </div>
                <div class="alert alert-success" role="alert" *ngIf="emailStatus == 1">
                    The email has been send successfully.
                </div>
            </div>
            <div class="alert alert-warning" role="alert" *ngIf="emailStatus == 2">
                when sending the email an error has occurred.
            </div>


            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="successModal.hide()">Close</button>
            </div>

        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



