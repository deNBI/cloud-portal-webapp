<div class="animated fadeIn" ng-app>
    <div class="row">
        <!--/.col-->
        <h1 *ngIf="selectedFacility">Projects Overview: {{selectedFacility['Facility']}}


        </h1>

        <div class="col-lg-12">

            <div class="card">
                <div>  <select [(ngModel)]="selectedFacility"  (ngModelChange)="onChangeSelectedFacility($event)" class="form-control col-md-1" name="selectedFacility">
                  <option  *ngFor="  let facility of managerFacilities" [ngValue]="facility"> {{facility['Facility']}} </option>

                </select></div>
                <div class="card-header">
                    <i class="fa fa-align-justify"></i> Projects
                </div>

                <div class="card-block">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>Project ID</th>
                            <th>Project Name</th>
                            <th>Description</th>

                            <th>Date created</th>
                            <th>Days running</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let project of projects">
                            <td>{{ project.Id }}</td>
                            <td>{{ project.Name }}</td>
                            <td>{{ project.Description }}</td>



                            <td>{{ project.DateCreated }}</td>
                            <td>{{ project.DaysRunning }}</td>
                            <td>
                                <button type="button" class="btn btn-secondary" data-toggle="modal"
                                        (click)="showMembersOfTheProject(project.Id, project.Name,project.ComputeCenter[0]); usersModal.show(); "

                                        >
                                    <i class="fa fa-users"></i>&nbsp;Show Members
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!--/.col-->
    </div>
</div>


<div bsModal #usersModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Label"
     aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Members of the Project {{ usersModalProjectID }}
                    ({{ usersModalProjectName }})</h4>
                <button type="button" class="close" (click)="usersModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>User ID</th>
                        <th>Member ID</th>
                        <th>Full Name</th>

                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let member of usersModalProjectMembers">
                        <td>{{ member.Id }}</td>
                        <td>{{ member.MemberId }}</td>
                        <td>{{ member.Username }}</td>
                    </tr>

                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="usersModal.hide()">Close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->






