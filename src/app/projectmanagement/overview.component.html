<div *ngIf="errorMessage !== null">
	An Error has occurred. {{errorMessage}}
</div>

<div *ngIf="!isLoaded && errorMessage === null" class="loader"></div>


<div class="animated fadeIn" *ngIf="isLoaded">
	<div class="row">
		<div class="col-12" *ngIf="(project_application | hasstatusinlist: Application_States.SUBMITTED)
    || (project_application | hasstatusinlist: Application_States.DECLINED)">
			<div class="card" id="submittedProjectInfoDiv">

				<div class="card-header">
					<h3>
						<a *ngIf="project_application?.project_application_openstack_project"
							 href="https://cloud.denbi.de/openstack/" target="_blank" rel="noopener noreferrer"
							 style="font-size: 2em"
							 class="project-openstack_plain_white_redbg"
							 data-toggle="tooltip"
							 title="This is an Openstack project"
						>
							<a class="path1"></a>
							<a class="path2"></a>
						</a>
						<a *ngIf="!project_application?.project_application_openstack_project"
							 href="https://cloud.denbi.de/simplevm/" target="_blank" rel="noopener noreferrer"
							 style="font-size: 2em"
							 class="project-simpleVM_Logo_bluebg"
							 data-toggle="tooltip"
							 title="This is a Simple VM project">
							<a class="path1"></a>
							<a class="path2"></a>
							<a class="path3"></a>
							<a class="path4"></a>
							<a class="path5"></a>
						</a>
						{{project_application?.project_application_name}}
					</h3>
				</div>


				<div class="card-body" id="project_application_status_overview"
						 *ngIf="!(project_application | hasstatusinlist: Application_States.APPROVED)
                    && !(project_application | hasstatusinlist: Application_States.TERMINATED)
                    && !(project_application | hasstatusinlist: Application_States.DECLINED)">
					<!-- <i class="fas fa-tasks"></i> -->
					<app-application-progress [application]="project_application"></app-application-progress>

				</div>


				<div class="card-body" *ngIf="project_application && (project?.UserIsPi ||project?.UserIsAdmin  || !project)">
					<div class="row">
						<div class="btn-group col-12">

						</div>
					</div>
					<div class="row">
						<button id="remove_application_button"
										*ngIf="(project_application | hasstatusinlist:Application_States.SUBMITTED)
                        || (project_application | hasstatusinlist:Application_States.DECLINED) "
										(click)="deleteModal.show();" type="button" style="margin:auto;"
										class="btn btn-outline-danger col-6">
							Remove Application
						</button>
					</div>
					<div class="row" style="margin-top:10px;">
						<button id="submitted_show_information_btn"
										(click)="getFacilityProject(); this.showInformationCollapse = !this.showInformationCollapse;"
										type="button" class="btn btn-outline-primary col-6" style="margin:auto;">
							<i class="fa fa-info-circle"></i>&nbsp;
							<span *ngIf="this.showInformationCollapse">Hide information</span>
							<span *ngIf="!this.showInformationCollapse">Show more information</span>
						</button>
					</div>
				</div>

				<div class="collapse" [ngClass]="{'show': showInformationCollapse}">
					<div class="table-responsive">
						<table class="table table-hover">
							<thead>
							<tr>
								<th></th>
								<th>Project Name</th>
								<th>Short Name</th>
								<th>Lifetime</th>
								<th>Date submitted</th>
								<th>Status</th>
							</tr>
							</thead>
							<tbody>
							<ng-container>
								<tr>
									<td>  <span *ngIf="project_application?.project_application_openstack_project"
															style="font-size: 20px"
															class="project-openstack_plain_white_redbg"
															data-toggle="tooltip"
															title="This is an Openstack project">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                  </span>
										<span *ngIf="!project_application?.project_application_openstack_project"
													style="font-size: 20px"
													class="project-simpleVM_Logo_bluebg"
													data-toggle="tooltip"
													title="This is a Simple VM project">
                      <span class="path1"></span>
                      <span class="path2"></span>
                      <span class="path3"></span>
                      <span class="path4"></span>
                      <span class="path5"></span>
                    </span></td>
									<td>{{ project_application?.project_application_name }}
									</td>
									<td>{{project_application?.project_application_shortname}}</td>
									<td>{{ project_application?.project_application_lifetime }} months</td>
									<td>{{ project_application?.project_application_date_submitted }}</td>
									<td>
										<ng-container *ngFor="let st of project_application?.project_application_status">
                      <span class="badge bg-primary" style="margin-left: 3px; margin-right: 3px" *ngIf="st !== 19">
                        {{getStatusById(st)}}
                      </span>
										</ng-container>
									</td>
								</tr>


							</ng-container>
							</tbody>
						</table>
						<app-application-detail [application]="project_application"></app-application-detail>

					</div>
				</div>


			</div>
		</div>


		<div class="col-12"
				 *ngIf="project && !(project_application | hasstatusinlist:Application_States.TERMINATED)
         && !(project_application | hasstatusinlist:Application_States.DECLINED)
         && !(project_application | hasstatusinlist:Application_States.SUBMITTED)">

			<div class="card" id="projectInformationDiv">

				<div class="card-header">
					<h3>
						<a *ngIf="project?.OpenStackProject" href="https://cloud.denbi.de/openstack/" rel="noopener noreferrer"
							 target="_blank"
							 style="font-size: 2em"
							 class="project-openstack_plain_white_redbg"
							 data-toggle="tooltip"
							 title="This is an Openstack project"
						>
							<a class="path1"></a>
							<a class="path2"></a>
						</a>
						<a *ngIf="!project?.OpenStackProject" href="https://cloud.denbi.de/simplevm/" rel="noopener noreferrer"
							 target="_blank"
							 style="font-size: 2em"
							 class="project-simpleVM_Logo_bluebg"
							 data-toggle="tooltip"
							 title="This is a Simple VM project">
							<a class="path1"></a>
							<a class="path2"></a>
							<a class="path3"></a>
							<a class="path4"></a>
							<a class="path5"></a>
						</a>
						{{project?.Name}}
					</h3>
				</div>

				<div class="card-body" id="project_application_status_overview_further"
						 *ngIf="!project_application?.project_application_status?.includes(Application_States.APPROVED)">
					<!-- <i class="fas fa-tasks"></i> -->

					<app-application-progress [application]="project_application"></app-application-progress>
				</div>

				<div class="card-body" id="projectMainInformationDiv"
						 *ngIf="project_application | hasstatusinlist:Application_States.APPROVED">
					<div class="row">
						<div class="col-6">
							<div class="callout callout-info" style="border-top-width: 0; border-bottom-width: 0; border-right-width: 0"
									 title="The project has been running for {{project?.DaysRunning}} of a total of {{project?.LifetimeDays}} granted days">
								<small class="text-muted">Project Runtime</small><br>
								<strong class="text-muted">{{project?.DateCreated}} - {{project?.DateEnd}}
									<span *ngIf="((project_application | hasstatusinlist: Application_States.LIFETIME_EXTENSION_REQUESTED)
                  || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_EXTENSION))">
                     - Extension by {{project_application?.project_lifetime_request?.extra_lifetime}} months requested on
										{{project_application?.project_lifetime_request?.date_submitted}}
                  </span>
								</strong><br>
								<div class="progress" style="height: 2px;">
									<div class="progress-bar bg-info" role="progressbar"
											 [ngStyle]="{'width.%': (calculateProgressBar(project?.DaysRunning / project?.LifetimeDays))}"
											 aria-valuemin="0" aria-valuemax="100"></div>
								</div>
							</div>
						</div>
						<div class="col-6">
							<div class="btn-group" style="margin-top:15px;">
								<ng-container *ngIf="!isAdmin &&!((project_application | hasstatusinlist: Application_States.LIFETIME_EXTENSION_REQUESTED)
                  || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_EXTENSION)
                  || lifetimeExtensionDisabled)">
                  <span class="d-inline-block" tabindex="0" data-toggle="tooltip"
												title="Only project administators are able to request project extensions.">
                    <button class="btn btn-outline-primary" disabled>
                      Request extension</button>
                  </span>
								</ng-container>
								<button class="btn btn-outline-primary" id="show_doi_question_modal"
												(click)="showDoiModal()"
												*ngIf="isAdmin &&!((project_application | hasstatusinlist: Application_States.LIFETIME_EXTENSION_REQUESTED)
                  || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_EXTENSION)
                  || lifetimeExtensionDisabled)">
									Request extension
								</button>
								<button class="btn btn-outline-secondary" disabled id="show_doi_question_modal_disabled"
												*ngIf="((project_application | hasstatusinlist: Application_States.LIFETIME_EXTENSION_REQUESTED)
                  || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_EXTENSION)
                  || lifetimeExtensionDisabled)">
									Extension requested
								</button>

								<ng-container *ngIf="!isAdmin && (project_application | hasstatusinlist:Application_States.APPROVED)
                        && !(project_application | hasstatusinlist:Application_States.TERMINATION_REQUESTED)
                        && !(project_application | hasstatusinlist:Application_States.WAIT_FOR_TERMINATION_FM)">

                  <span class="d-inline-block" tabindex="0" data-toggle="tooltip"
												title="Only project administators are able to request project terminations.">
                    <button class="btn btn-outline-danger" disabled>
                      Request termination</button>
                  </span>
								</ng-container>
								<button class="btn btn-outline-danger"
												*ngIf="isAdmin && (project_application | hasstatusinlist:Application_States.APPROVED)
                        && !(project_application | hasstatusinlist:Application_States.TERMINATION_REQUESTED)
                        && !(project_application | hasstatusinlist:Application_States.WAIT_FOR_TERMINATION_FM)"
												(click)="terminateModal.show()" id="show_termination_modal_button">Request termination
								</button>
								<button class="btn btn-outline-secondary" disabled
												*ngIf="(project_application | hasstatusinlist:Application_States.TERMINATION_REQUESTED)
                        || (project_application | hasstatusinlist:Application_States.WAIT_FOR_TERMINATION_FM)"
												(click)="terminateModal.show()" id="show_termination_modal_button_disabled">Termination
									Requested
								</button>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="col-6">
							<div class="callout callout-info" *ngIf="this.resourceDataLoaded"
									 style="border-top-width: 0; border-bottom-width: 0; border-right-width: 0">
								<small class="text-muted">Computational Resources</small><br>
								<strong class="text-muted" *ngIf="project?.OpenStackProject">{{maximumVMs}} VMs with a total of
									{{project_application?.project_application_total_cores}} VCPUs and
									{{project_application?.project_application_total_ram}} GBs of RAM
									<span *ngIf="((project_application | hasstatusinlist: Application_States.MODIFICATION_REQUESTED)
                  || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_MODIFICATION))">
                     - Resource modification requested on
										{{project_application?.project_modification_request?.date_submitted}}
                  </span>
								</strong>
								<strong class="text-muted" *ngIf="!project?.OpenStackProject">{{vmsInUse}} of {{maximumVMs}} VMS,
									{{coresInUse}} of {{project_application?.project_application_total_cores}} VCPUs and
									{{ramInUse}} of {{project_application?.project_application_total_ram}} GBs RAM in use
									<span *ngIf="((project_application | hasstatusinlist: Application_States.MODIFICATION_REQUESTED)
                  || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_MODIFICATION))">
                     - Resource modification requested on
										{{project_application?.project_modification_request?.date_submitted}}
                  </span>
								</strong><br>
								<div class="progress" style="height: 2px;" *ngIf="!project?.OpenStackProject">
									<div class="progress-bar bg-info" role="progressbar"
											 [ngStyle]="{'width.%': calculateProgressBar(vmsInUse / maximumVMs)}"
											 aria-valuemin="0" aria-valuemax="100"></div>
								</div>
							</div>


						</div>
						<div class="col-6">
							<div class="btn-group" style="margin-top:15px;">
								<ng-container *ngIf="!isAdmin && (project_application | hasstatusinlist:Application_States.APPROVED)
                        && !((project_application | hasstatusinlist: Application_States.MODIFICATION_REQUESTED)
                  || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_MODIFICATION)
                  || modificationRequestDisabled)">
                  <span class="d-inline-block" tabindex="0" data-toggle="tooltip"
												title="Only project administators are able to request resource modifications.">
                    <button class="btn btn-outline-primary" disabled>
                      Request resource modification</button>
                  </span>
								</ng-container>
								<button class="btn btn-outline-primary" id="show_modification_extension_button"
												*ngIf="isAdmin && !((project_application | hasstatusinlist: Application_States.MODIFICATION_REQUESTED)
                  || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_MODIFICATION)
                  || modificationRequestDisabled)"

												(click)="showResourceModal();">Request resource modification
								</button>
								<button class="btn btn-outline-secondary" disabled id="show_modification_extension_button_disabled"
												*ngIf="((project_application | hasstatusinlist: Application_States.MODIFICATION_REQUESTED)
                  || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_MODIFICATION)
                  || modificationRequestDisabled)">
									Resource modification requested
								</button>
								<a class="btn btn-outline-success" href="#/virtualmachines/newVM"
									 *ngIf="!project?.OpenStackProject && isAbleToStart()">Start a VM</a>
								<a class="btn btn-outline-success" target="_blank" rel="noopener noreferrer"
									 href="{{project?.ComputeCenter.Login}}"
									 *ngIf="project?.OpenStackProject">Login to OpenStack</a>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-6" title="Click Contact to send a mail to the facility.">
							<div class="callout callout-info"
									 style="border-top-width: 0; border-bottom-width: 0; border-right-width: 0">
								<small class="text-muted">Facility</small><br>
								<strong class="text-muted">{{project?.ComputeCenter.Name}}</strong>
							</div>
						</div>
						<div class="col-6" *ngIf="this.supportMails?.length === 1">
							<a class="btn btn-outline-primary" target="_blank" rel="noopener noreferrer"
								 href="mailto:{{project?.ComputeCenter.Support}}"
								 style="margin-top:15px;">Contact Support</a>
						</div>
						<div class="col-6" *ngIf="this.supportMails?.length > 1">

							<div class="dropdown" dropdown style="margin-top:15px;">
								<button class="btn btn-outline-primary dropdown-toggle" id="actionDropdownMenu" data-toggle="dropdown"
												type="button" aria-haspopup="true" aria-expanded="false"
												dropdownToggle>
									Contact Support
								</button>
								<div class="dropdown-menu" aria-labelledby="dropdownMenu" role="menu"
										 *dropdownMenu id="dropdownMenu">
									<a *ngFor="let mail of supportMails" class="dropdown-item btn btn-outline-primary"
										 href="mailto:{{mail}}" target="_blank" rel="noopener noreferrer">Contact {{mail}}</a>
								</div>
							</div>


						</div>
					</div>
					<div class="row" *ngIf="project_application?.credits_allowed">
						<div class="col-6">
							<div class="callout callout-info"
									 style="border-top-width: 0; border-bottom-width: 0; border-right-width: 0">
								<small class="text-muted">Credits</small><br>
								<strong class="text-muted">
                   <span *ngIf="project?.ApprovedCredits - project?.CurrentCredits > 0">
                  Used {{project?.CurrentCredits }} of {{project?.ApprovedCredits}} credits <br>
										 {{(project?.ApprovedCredits - project?.CurrentCredits) }} credits left</span>
									<span *ngIf="project?.ApprovedCredits - project?.CurrentCredits <= 0">
                     Used {{project?.ApprovedCredits }} of {{project?.ApprovedCredits}} credits
                    <br>No credits left!</span>
									<span *ngIf="((project_application | hasstatusinlist: Application_States.CREDITS_EXTENSION_REQUESTED)
                      || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_CREDITS))">
                     - {{project_application?.project_credit_request?.extra_credits }} additional credits requested on
										{{project_application?.project_credit_request?.date_submitted}}
                  </span>
								</strong>
								<br>
								<div class="progress" style="height: 2px;">
									<div class="progress-bar bg-info" role="progressbar"
											 [ngStyle]="{'width.%': (calculateProgressBar(project?.CurrentCredits / project?.ApprovedCredits))}"
											 aria-valuemin="0" aria-valuemax="100"></div>

								</div>
								<br>
								<strong class="text-muted">Why do I see this?</strong>
								<br>
								<div class="text-muted">We selected your project as one of the few project where we track the resource
									usage with Cloud
									Credits usage.
									You should have received an E-Mail with information about Cloud Credits, if this is not the case,
									please message
									us at <a href="mailto:{{CLOUD_MAIL}}">{{CLOUD_MAIL}}</a>. For general information about Cloud Credits
									please visit:<br>
									- <a href="{{CREDITS_WIKI}}" target="_blank" rel="noopener noreferrer">Cloud Credits Wiki page</a>
								</div>
							</div>
						</div>
						<div class="col-6" style="margin-top:15px;">
							<ng-container *ngIf="!isAdmin && !((project_application | hasstatusinlist: Application_States.CREDITS_EXTENSION_REQUESTED)
                  || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_CREDITS)
                  || creditsExtensionDisabled)">
                  <span class="d-inline-block" tabindex="0" data-toggle="tooltip"
												title="Only project administators are able to request more credits.">
                    <button class="btn btn-outline-success" disabled>
                      Request more credits</button>
                  </span>
							</ng-container>
							<button id="show_credits_extension_modal"
											*ngIf="isAdmin && !((project_application | hasstatusinlist: Application_States.CREDITS_EXTENSION_REQUESTED)
                  || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_CREDITS)
                  || creditsExtensionDisabled)"
											(click)="showCreditsExtensionModal();"
											class="btn btn-outline-success"
											type="button">Request more credits
							</button>
							<button id="show_credits_extension_modal_disabled" disabled class="btn btn-outline-secondary"
											*ngIf="((project_application | hasstatusinlist: Application_States.CREDITS_EXTENSION_REQUESTED)
                      || (project_application | hasstatusinlist: Application_States.WAIT_FOR_CONFIRMATION_CREDITS)
                      || creditsExtensionDisabled)"
											type="button">More credits requested
							</button>
						</div>
						<div class="col-6">
							<div *ngIf="project_application?.project_application_initial_credits === 0" class="alert alert-primary">
								Your approved credits are lower or equal to zero.
								Please submit a Credits Extension or contact us at <a href="mailto:{{CLOUD_MAIL}}">{{CLOUD_MAIL}}</a>,
								so we may calculate and set the correct amount for your
								project.
							</div>
						</div>
					</div>
				</div>

				<div class="card-body" *ngIf="project_application && (project?.UserIsPi ||project?.UserIsAdmin  || !project)">
					<div class="row">
						<div class="btn-group col-12">


						</div>
					</div>
					<div class="row">
						<div class="btn-group col-12">
							<button id="show_information_btn"
											(click)="getFacilityProject(); this.showInformationCollapse = !this.showInformationCollapse;"
											type="button" class="btn btn-outline-primary col-6" style="margin:auto;">

								<i class="fa fa-info-circle"></i>&nbsp;
								<span *ngIf="this.showInformationCollapse">Hide information</span>
								<span *ngIf="!this.showInformationCollapse">Show more information</span>
							</button>
						</div>
					</div>
				</div>
				<!-- check collapse animation possibility -->
				<div class="collapse" [ngClass]="{'show': showInformationCollapse}">
					<div class="table-responsive">
						<table class="table table-hover">
							<thead>
							<tr>
								<th></th>
								<th>Project Name</th>
								<th>Short Name</th>
								<th>Lifetime</th>
								<th>Date submitted</th>
								<th>Status</th>
							</tr>
							</thead>
							<tbody>
							<ng-container>
								<tr>
									<td>  <span *ngIf="project_application?.project_application_openstack_project"
															style="font-size: 20px"
															class="project-openstack_plain_white_redbg"
															data-toggle="tooltip"
															title="This is an Openstack project">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                  </span>
										<span *ngIf="!project_application?.project_application_openstack_project"
													style="font-size: 20px"
													class="project-simpleVM_Logo_bluebg"
													data-toggle="tooltip"
													title="This is a Simple VM project">
                      <span class="path1"></span>
                      <span class="path2"></span>
                      <span class="path3"></span>
                      <span class="path4"></span>
                      <span class="path5"></span>
                    </span></td>
									<td>{{ project_application?.project_application_name }}
									</td>
									<td>{{project_application?.project_application_shortname}}</td>
									<td>{{ project_application?.project_application_lifetime }} months</td>
									<td>{{ project_application?.project_application_date_submitted }}</td>
									<td>
										<ng-container *ngFor="let st of project_application?.project_application_status">
                      <span style="margin-left: 3px; margin-right: 3px" class="badge bg-primary" *ngIf="st !== 19">
                        {{getStatusById(st)}}
                      </span>
										</ng-container>
									</td>
								</tr>


							</ng-container>
							</tbody>
						</table>
						<app-application-detail [application]="project_application"></app-application-detail>

					</div>
				</div>


			</div>
		</div>
		<!--/.col-->
	</div>


	<div class="row">
		<div class="col"
				 *ngIf="project && ((project_application | hasstatusinlist:Application_States.APPROVED)
         || (project_application | hasstatusinlist:Application_States.MODIFICATION_REQUESTED)
         || (project_application | hasstatusinlist:Application_States.MODIFICATION_DECLINED)
         )">

			<div class="card" id="projectMemberDiv">
				<div class="card-header">
					<i class="fa fa-align-justify"></i>Members of the Project {{ project?.Name }}
				</div>

				<div class="card-body">
					<div class="btn-group col-12" *ngIf="isAdmin || is_vo_admin">
						<button id="add_member_btn_modal"
										(click)="setAddUserInvitationLink(); addUserModal.show();"

										type="button" style="margin-bottom:5px;"
										class="btn btn-outline-success"><i class="fa fa-plus"></i>&nbsp; Add Member
						</button>

						<button
							type="button" style="margin-bottom:5px;"
							(click)="applicationModal.show();getUserProjectApplications();"
							class="btn btn-outline-primary"><i class="fa fa-list-alt"></i>&nbsp;
							Member Applications
						</button>

						<button (click)="removeCheckedMembers(project_application?.project_application_perun_id)" type="button"
										style="margin-bottom:5px;" [disabled]="checked_member_list.length <= 0 || remove_members_clicked"
										class="btn btn-outline-danger"><i class="fa fa-trash"></i>&nbsp;Remove Members
						</button>

					</div>
					<div class="col-12 alert alert-primary" *ngIf="!isAdmin && !is_vo_admin">
            <span><strong>Notice: </strong>Only project administrators are able to remove or add project members and
            change the status of members.</span>
					</div>
					<div class="table-responsive">
						<table class="table table-hover">
							<thead>
							<tr>
								<th *ngIf="isAdmin || is_vo_admin">
									<input type="checkbox" id="selectAll" name="selectAll"
												 (change)="setAllMembersChecked();"
												 [checked]="allSet">
								</th>
								<th>User ID</th>
								<th>Member ID</th>
								<th>Full Name</th>
								<th *ngIf="isAdmin || is_vo_admin">Actions</th>

							</tr>
							</thead>
							<tbody>
							<tr *ngFor="let member of project_members" [ngStyle]="{'color':isPi(member)}">
								<td *ngIf="isAdmin || is_vo_admin">
									<input *ngIf="userinfo?.MemberId !== member.memberId" type="checkbox" id="{{member.userId}}"
												 name="member.userId"
												 [checked]="isMemberChecked(member.memberId)" (change)="checkUnCheckMember(member.memberId);">
								</td>
								<td>

									{{ member.userId }}</td>
								<td>{{ member.memberId }}</td>
								<td>{{ member.userName }}</td>
								<td *ngIf="this.project.UserIsPi || this.project.UserIsAdmin|| is_vo_admin">
									<div class="btn-group" role="group">
										<button *ngIf="!member.IsPi" (click)="promoteAdmin( project?.Id,member.userId,member.userName);
                                                notificationModal.show();
                                               " class="btn btn-primary" type="button" style="margin: 2px">
											<i class="fa fa-plus-circle"></i>&nbsp; Set Admin status
										</button>
										<button *ngIf="member.IsPi &&  userinfo?.MemberId !== member.memberId" (click)="removeAdmin( project?.Id,member.userId,member.userName);
                                                notificationModal.show();
                                               " class="btn btn-primary" type="button" style="margin: 2px">
											<i class="fa fa-minus-circle"></i>&nbsp; Remove Admin status
										</button>
										<button [id]="'remove_member_' + member.userName" *ngIf=" userinfo?.MemberId !== member.memberId"
														(click)="removeMember(project?.Id,member.memberId,member.userName);
                                                notificationModal.show();
                                               " class="btn btn-danger" type="button" style="margin: 2px">

											<i class="fa fa-trash"></i>&nbsp; Remove member
										</button>
									</div>

								</td>
							</tr>


							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>


	</div>
	<div class="row"
			 *ngIf="project && (project?.UserIsPi ||project?.UserIsAdmin) && project_application?.project_application_workshop ">

		<div class="col"
				 *ngIf="project && (project?.UserIsPi ||project?.UserIsAdmin)
         && !(project_application | hasstatusinlist:Application_States.TERMINATED)
         && !(project_application | hasstatusinlist:Application_States.DECLINED)
         && !(project_application | hasstatusinlist:Application_States.SUBMITTED)
         && !(project_application | hasstatusinlist:Application_States.WAIT_FOR_CONFIRMATION)">

			<div class="card" id="workshioCard">
				<div class="card-header">
					<i class="fa fa-align-justify"></i>
					Workshops
				</div>

				<div class="card-body" style="max-height: 800px;" *ngIf="!workshopInfosLoaded">

					<div class="spinner-border text-primary" style="display:block; margin:auto;"></div>


				</div>


				<div class="card-body" *ngIf="workshopInfosLoaded">
					<div class="btn-group" *ngFor="let info of workshop_infos ">

						<button id="select_workshop_{{info?.shortname}}_btn"
										[ngClass]="{'btn-outline-success': info.shortname === selected_workshop_info.shortname,
								'btn-outline-warning' : info.shortname !== selected_workshop_info.shortname}"
										(click)="setSelectedWorkshopInfo(info)"

										type="button" style="margin-bottom:5px;margin-right:5px;"
										class="btn">{{info.shortname}}
						</button>


					</div>
					<div class="table-responsive">
						<table class="table table-hover">
							<thead>
							<tr>
								<th>User</th>
								<th>Email</th>
								<th>Url</th>
							</tr>
							</thead>
							<tbody>
							<tr *ngFor="let info of selected_workshop_info?.url_data ">

								<td>

									{{ info?.user_name }}</td>
								<td>{{ info?.user_email }}</td>
								<td>{{ info?.resenv_url }}</td>

							</tr>


							</tbody>
						</table>
					</div>

				</div>

			</div>
		</div>
	</div>
	<div class="row">

		<div class="col"
				 *ngIf="project && (project?.UserIsPi ||project?.UserIsAdmin)
         && !(project_application | hasstatusinlist:Application_States.TERMINATED)
         && !(project_application | hasstatusinlist:Application_States.DECLINED)
         && !(project_application | hasstatusinlist:Application_States.SUBMITTED)
         && !(project_application | hasstatusinlist:Application_States.WAIT_FOR_CONFIRMATION)">

			<div class="card" id="doiCard">
				<div class="card-header">
					<i class="fa fa-align-justify"></i>
					<a href="{{WIKI_PUBLICATIONS}}"
						 target="_blank" rel="noopener noreferrer">Digital object identifier (DOI)</a>
				</div>


				<div class="card-body">
					<div *ngIf="doiError" class="alert alert-danger">{{doiError}}</div>
					<div class="table-responsive">
						<table class="table ">

							<tbody>
							<ng-container
								*ngFor="let doi of dois">
								<tr>
									<td><a target="_blank" rel="noopener noreferrer"
												 [href]="'https://doi.org/' + doi.identifier">{{doi.identifier}}</a>
									</td>

									<td>
										<button
											class="btn btn-danger" type="button" (click)="deleteDoi(doi);">

											<i class="fa fa-trash"></i>&nbsp;
										</button>
									</td>

								</tr>
							</ng-container>

							<tr>
								<td>
									<input style="width: 100%" type="text" placeholder="e.g. 10.1000/182"
												 id="doi_input_field"
												 [disabled]="disabledDoiInput"
												 pattern="10.\d{4,9}\/[-._;()\/:a-zA-Z0-9]+" [(ngModel)]="newDoi"
												 #doiInput></td>
								<td>
									<button id="add_doi_btn"
													(click)="addDoi();"
													[disabled]="!doiInput.validity.valid || disabledDoiInput"
													type="button"
													class="btn btn-success"><i class="fa fa-plus"></i>&nbsp;
									</button>
								</td>

							</tr>
							</tbody>
						</table>

					</div>
					<div class="alert alert-info">
						<p>Please note that the publications entered on this page are listed publicly on
							<a href="https://cloud.denbi.de/publications" target="_blank"
								 rel="noopener noreferrer">this page on our website</a>.
							We kindly ask you to list your publications which have been created
							during your work in the de.NBI Cloud and/or this project.</p>
					</div>
				</div>
			</div>

		</div>

	</div>
	<div class="row">
		<div class="col"
				 *ngIf="project && project_application.credits_allowed && ((project_application | hasstatusinlist:Application_States.APPROVED)
           || (project_application | hasstatusinlist:Application_States.MODIFICATION_REQUESTED)
           || (project_application | hasstatusinlist:Application_States.MODIFICATION_DECLINED) )">
			<div class="card" style=" ">
				<div class="card-header">
					<i class="fa fa-align-justify"></i> Credit Usage history of {{project?.Name }}


				</div>
				<div class="card-body justify-content-center align-items-center">
					<div *ngIf="!creditHistoryLoaded" id="overlay">
						<div class="w-100 d-flex justify-content-center align-items-center">
							<div class="spinner"></div>
						</div>
					</div>
					<canvas #creditsChart
									id="creditsChart">
					</canvas>
				</div>

			</div>
		</div>
	</div>
</div>


<div bsModal #addUserModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Label"
		 aria-hidden="true">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content ">
			<div class="modal-header">
				<h4 class="modal-title">Add member to the project {{project?.Name }}
				</h4>
				<button type="button" class="close" style="cursor:pointer" (click)="addUserModal.hide()"
								aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">

				<div class="container-fluid">
					<div class="row">
						<p style=" margin-bottom: 15px;">Search and add a user to your project by providing at least
							four characters of their name:</p>
					</div>
					<div class="row">
						<div class="col-md-8">
							<input style="width: 100%" placeholder="" id="add_member_input" #searchString>
						</div>
						<div class="col-md-4">
							<button type="button" class="btn btn-primary" id="search_member_btn"
											(click)="filterMembers(searchString.value )"><i
								class="fa fa-search"></i> Search Member
							</button>
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-md-12">
							<strong>Please note</strong> that if you can not find the user, they are not registered for a
							a de.NBI Cloud account. In that case you can invite them by sending them the following link:
							<br>
							<br>
							<ul style="list-style-type:none;">

								<li>
									<pre [hidden]="showLink">{{invitation_link}}</pre>
									<div class="btn-group-vertical">
										<button class="btn btn-primary" style="margin-bottom: 5px" (click)="showLink = !showLink">
											<span [hidden]="!showLink">Show</span>
											<span [hidden]="showLink">Hide</span>
											link
										</button>
										<button class="btn btn-success" (click)="copyToClipboard(invitation_link)">Copy link
										</button>
									</div>
								</li>
							</ul>
							<br>
							After the user registered for ELIXIR/de.NBI and applied for your group, you can approve his application.
							Read more about the process <a target="_blank" rel="noopener noreferrer"
																						 href="{{WIKI_MEMBER_MANAGEMENT}}">here</a>.
						</div>
					</div>

					<div class="table-responsive">
						<table *ngIf="filteredMembers!==null" class="table table-bordered table-striped table-sm">
							<thead>

							<th></th>
							<th>First Name</th>
							<th>Last Name</th>
							<th>Email</th>
							</thead>
							<tbody *ngFor="  let member of filteredMembers">
							<td>
								<button style="padding: 5px; margin: 5px"
												(click)="resetNotificationModal();addMember(project?.Id,member['member_id'],member['firstName'],member['lastName']);filteredMembers=null; notificationModal.show();"
												class="btn btn-success" id="add_member_btn"><i class="fa fa-plus"></i> Add Member
								</button>
								<button style="padding: 5px; margin: 5px"
												(click)="resetNotificationModal();addAdmin(project?.Id,member['member_id'],member['user_id'],member['firstName'],member['lastName']);filteredMembers=null; notificationModal.show();"
												class="btn btn-primary"><i class="fa fa-plus"></i> Add Admin
								</button>
							</td>
							<td>{{member['firstName']}}</td>
							<td>{{member['lastName']}}</td>
							<td>{{member['mail']}}</td>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<!--  <button type="button" (click)="addUserModal.hide();
																					notificationModal.show();
																					addMember(addUserModalProjectID, addMemberID.value)" class="btn btn-success"><i class="fa fa-dot-circle-o"></i>
							Add User
					</button> -->
				<button id="close_add_user_modal_btn" type="button" (click)="filteredMembers=null; addUserModal.hide();"
								class="btn  btn-danger"><i class="fa fa-times"></i> Close
				</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div bsModal #terminateModal="bs-modal" class="modal fade" tabindex="-1"
		 role="dialog" aria-labelledby="Label"
		 aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">Terminate Project</h4>
				<button type="button" class="close" style="cursor:pointer"
								(click)="terminateModal.hide()" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">

				<div class="alert alert-warning" role="alert">
					Are you sure you want to terminate this project?
				</div>
				<app-project-os-details *ngIf="project" [project]="project"></app-project-os-details>
				<div class="alert alert-danger" role="alert">
					All used resources will be scheduled for deletion and then irreversibly terminated!

				</div>
				<div class="alert  form-check"
						 [ngClass]="{'alert-danger':!terminate_confirmation_given,'alert-success':terminate_confirmation_given}"
				>

					<label class="form-check-label">
						<input class="form-check-input"
									 name="terminate_confirmation_given"
									 type="checkbox"
									 id="terminate_confirmation_given"
									 [checked]="terminate_confirmation_given"
									 [(ngModel)]="terminate_confirmation_given"

						>
						I hereby confirm that the project shall be terminated.
					</label>
				</div>


			</div>
			<div class="modal-footer">
				<button class="btn  btn-success col-md-4" id="terminate_project_btn"
								[disabled]="!terminate_confirmation_given"
								(click)="terminateModal.hide();notificationModal.show();requestProjectTermination();">
					Yes
				</button>
				<button class="btn  btn-danger col-md-4" type="reset"
								(click)="terminateModal.hide()">Cancel
				</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div bsModal #applicationModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
		 aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">Applications for {{project?.Name}}</h4>
				<button type="button" class="close" style="cursor: pointer;"
								(click)="applicationModal.hide()"
								aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">

				<div *ngIf="!loaded" style="text-align: center"><i class="fa fa-spinner fa-spin"
																													 style="font-size:100px; margin: auto;margin-left: auto;margin-right: auto"></i>
				</div>

				<div *ngIf="loaded" class="table-responsive">
					<table class="table table-bordered table-striped table-sm">
						<thead>

						<th>Name</th>
						<th>Date Submitted</th>
						<th>Actions</th>
						</thead>
						<tbody *ngFor="  let application of project?.ProjectMemberApplications">

						<td>{{application?.Name}}</td>
						<td>{{application?.DateCreated}}</td>

						<td>
							<button
								(click)="approveMemberApplication(project?.Id,application.Id,application.Name); "
								class="btn btn-success"><i class="fa fa-check"></i> Approve
							</button>
							<button style="margin-left: 10px"
											(click)="application_action='rejected';application_member_name=application.Name;rejectMemberApplication(project?.Id,application.Id,application.Name); "
											class="btn btn-danger"><i class="fa fa-times"></i> Reject
							</button>
						</td>
						</tbody>
					</table>
				</div>
			</div>


			<div class="modal-footer">

				<p *ngIf="application_action_success && application_action_done"
					 class="alert alert-success mr-auto">
					<strong>Success:</strong> Succesfully {{application_action}} the application of
					{{application_member_name}}.
				</p>
				<p *ngIf="!application_action_success && application_action_done && !application_action_error_message"
					 class="alert alert-danger mr-auto">
					<strong>Failed:</strong> The application of {{application_member_name}} could not be
					{{application_action}} .
				</p>
				<p *ngIf="!application_action_success && application_action_done && application_action_error_message"
					 class="alert alert-danger mr-auto">
					<strong>Failed:</strong> User didn't verify his email address yet. Please wait until the
					email is
					verified.
				</p>
				<button type="button" class="btn btn-primary"
								(click)="getUserProjectApplications()">
					Refresh
				</button>
				<button type="button" class="btn btn-secondary"
								(click)="application_action_error_message=null;;applicationModal.hide();">
					Close
				</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div>

<div bsModal #notificationModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
		 aria-labelledby="Label"
		 aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title" id="notification_title">{{ notificationModalTitle }}</h4>
				<button type="button" class="close" style="cursor:pointer"
								(click)="notificationModal.hide()"
								aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="alert alert-{{ notificationModalType }}" role="alert">
					{{ notificationModalMessage }}
				</div>
			</div>
			<div class="modal-footer">
				<button *ngIf="notificationModalIsClosable === true" type="button"
								(click)="resetNotificationModal(); notificationModal.hide();" type="reset"
								class="btn  btn-secondary" id="close_notification"> Close
				</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div bsModal #deleteModal="bs-modal" class="modal fade" tabindex="-1"
		 role="dialog" aria-labelledby="Label"
		 aria-hidden="true"
		 id="remove_application_modal">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">Delete Application</h4>
				<button type="button" class="close" style="cursor:pointer"
								(click)="deleteModal.hide()" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">

				<div class="alert alert-warning" role="alert">
					Are you sure you want to remove this application?
				</div>

			</div>
			<div class="modal-footer">
				<button class="btn  btn-success col-md-4" id="confirm_remove_application_button"
								(click)="deleteApplication();deleteModal.hide();notificationModal.show()">
					Yes
				</button>
				<button class="btn  btn-danger col-md-4" type="reset"
								(click)="deleteModal.hide()">Cancel
				</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

