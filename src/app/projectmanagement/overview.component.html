<div *ngIf="errorMessage != null">
  An Error has occurred. {{errorMessage}}
</div>

<div *ngIf="!isLoaded && errorMessage == null" class="loader"></div>


<div class="animated fadeIn" *ngIf="isLoaded">
  <div class="row">

    <div class="col-lg-12"
         *ngIf="project && (project_application?.Status == application_states.APPROVED
         || project_application?.Status == application_states.MODIFICATION_REQUESTED
         || project_application?.Status == application_states.MODIFICATION_DECLINED
         || project_application?.Status == application_states.MODIFICATION_DECLINED)">


      <div class="card">
        <div class="card-header">
          <h3>
            <a *ngIf="project?.OpenStackProject" href="https://cloud.denbi.de/openstack/" target="_blank"
               style="font-size: 2em"
               class="project-openstack_plain_white_redbg"
               data-toggle="tooltip"
               title="This is an Openstack project"
            >
              <a class="path1"></a>
              <a class="path2"></a>
            </a>
            <a *ngIf="!project?.OpenStackProject" href="https://cloud.denbi.de/simplevm/" target="_blank"
               style="font-size: 2em"
               class="project-simpleVM_Logo_bluebg"
               data-toggle="tooltip"
               title="This is a Simple VM project">
              <a class="path1"></a>
              <a class="path2"></a>
              <a class="path3"></a>
              <a class="path4"></a>
              <a class="path5"></a>
            </a>
            {{project?.Name}}
          </h3>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
              <tr>
                <th>Project Name</th>
                <th>Description</th>
                <th>Date created (d/m/y)</th>
                <th>Expiration Date (d/m/y)</th>
                <th>Days running</th>
                <th *ngIf="is_vo_admin">Credits Used</th>
                <th>Lifetime in Days</th>
                <th>Facility</th>

              </tr>
              </thead>
              <tbody>

              <tr>
                <!--[ngStyle]="{'color':lifeTimeReached(project?.LifetimeDays,project?.DaysRunning)}"-->
                <td>{{ project?.Name }}
                </td>

                <td>
                  <button class="btn btn-info"
                          (click)="infoModal.hide();descriptionModal.show();">Show
                    Description
                  </button>
                </td>

                <td>{{ project?.DateCreated }}</td>
                <td>{{project?.DateEnd}}</td>
                <td>{{ project?.DaysRunning }}</td>
                <th *ngIf="is_vo_admin">{{current_credits}}/{{project?.ApprovedCredits}}</th>
                <td>{{project?.LifetimeDays}}</td>

                <td>
                  <p *ngIf="project?.ComputeCenter?.Name">{{project?.ComputeCenter.Name}}</p>
                  <ul *ngIf="project?.ComputeCenter?.Name">
                    <li *ngIf="project?.OpenStackProject"> Login: <a target="_blank"
                                                                     href="{{project?.ComputeCenter.Login}}">
                      {{project?.ComputeCenter.Login}}</a></li>
                    <li>Support: {{project?.ComputeCenter.Support}}</li>

                  </ul>

                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <!--/.col-->
  </div>

  <div class="row" *ngIf="project_application && (project?.UserIsPi ||project?.UserIsAdmin  || !project)">
    <div class="col">
      <div class="card" style="height: calc(100% - 1.5rem);">
        <div class="card-header">
          <i class="fa fa-align-justify"></i> Actions
        </div>
        <div class="card-body">
          <div class="row">
            <div class="btn-group col-12">
              <button
                id="remove_application_button"
                *ngIf="project_application?.Status == application_states.SUBMITTED || project_application?.Status == application_states.DECLINED"
                (click)="deleteModal.show();"
                type="button" style="margin-bottom:5px;"
                class="btn btn-danger">
                Remove Application
              </button>
              <button id="show_credits_extension_modal"
                      *ngIf="(project_application?.Status == application_states.APPROVED || project_application?.Status == application_states.MODIFICATION_DECLINED) && is_vo_admin"
                      (click)="newFlavors= {};initExampleFlavors();creditsExtensionModal.show()"
                      class="btn btn-success"
                      type="button" style="margin-bottom:5px;margin-right:5px">
                Request More Credits
              </button>
              <button id="show_extension_modal"
                      *ngIf="project_application?.Status == application_states.APPROVED || project_application?.Status == application_states.MODIFICATION_DECLINED"
                      (click)="newFlavors= {};selected_ontology_terms=[];initRamCores();calculateCredits(f.controls.project_application_renewal_lifetime?.value);doiQuestionModal.show()"
                      class="btn btn-warning"
                      type="button" style="margin-bottom:5px;">
                Request Extension/Modification
              </button>

            </div>
          </div>
          <div class="row">
            <div class="btn-group col-12">
              <button id="show_information_btn" (click)="informationModal.show();getFacilityProject();"
                    type="button" class="btn btn-info"  style="margin-top:5px;">
                <i class="fa fa-info-circle"></i>&nbsp;
                <span>Show Information</span>
              </button>
            </div>
          </div>

          <div class="alert alert-info" style="margin-top:15px;"
               *ngIf="project_application.Status == application_states.APPROVED">
            <p>You can find more information about modification requestes
              <a href="https://cloud.denbi.de/wiki/portal/modification/" target="_blank">here</a>.</p>
            <p *ngIf="is_vo_admin">Information about credits are coming soon.</p>
          </div>

        </div>

      </div>
    </div>

    <div class="col"
         *ngIf="project && (project?.UserIsPi ||project?.UserIsAdmin)  && (project_application?.Status ==  application_states.APPROVED || project_application?.Status ==  application_states.MODIFICATION_REQUESTED  || project_application?.Status ==  application_states.MODIFICATION_DECLINED || project_application?.Status ==  application_states.MODIFICATION_DECLINED)">

      <div class="card">
        <div class="card-header">
          <i class="fa fa-align-justify"></i>
          <a href="https://cloud.denbi.de/wiki/citation_and_publication/#publications"
             target="_blank">Digital object identifier (DOI)</a>
        </div>


        <div class="card-body">
          <div class="table-responsive">
            <table class="table ">

              <tbody>
              <ng-container
                *ngFor="let doi of dois">
                <tr>
                  <td><a target="_blank" [href]="'https://doi.org/' + doi.identifier">{{doi.identifier}}</a></td>

                  <td>
                    <button
                      class="btn btn-danger" type="button" (click)="deleteDoi(doi);">

                      <i class="fa fa-trash"></i>&nbsp;
                    </button>
                  </td>

                </tr>
              </ng-container>

              <tr>
                <td><input style="width: 100%" type="text" required placeholder="e.g. 10.1000/182"
                           pattern="10.\d{4,9}\/[-._;()\/:a-zA-Z0-9]+" [(ngModel)]="newDoi" #doiInput></td>

                <td>
                  <button id="add_doi_btn"
                          (click)="addDoi();"
                          [disabled]="!doiInput.validity.valid"
                          type="button"
                          class="btn btn-success"><i class="fa fa-plus"></i>&nbsp;
                  </button>
                </td>

              </tr>
              </tbody>
            </table>

          </div>
          <div class="alert alert-info">
            <p>Please note that the publications entered on this page are listed publicly on
              <a href="https://cloud.denbi.de/publications" target="_blank">this page on our website</a>.
              We kindly ask you to list your publications which have been created
              during your work in the de.NBI Cloud and/or this project. </p>
          </div>
        </div>
      </div>

    </div>

  </div>
  <div class="row">
    <div class="col"
         *ngIf="project && (project_application?.Status ==  application_states.APPROVED || project_application?.Status ==  application_states.MODIFICATION_REQUESTED  || project_application?.Status ==  application_states.MODIFICATION_DECLINED || project_application?.Status ==  application_states.MODIFICATION_DECLINED)">

      <div class="card">
        <div class="card-header">
          <i class="fa fa-align-justify"></i>Members of the Project {{ project?.Name }}
        </div>

        <div class="card-body">
          <div class="btn-group col-12">
            <button id="add_member_btn_modal"
                    (click)="setAddUserInvitationLink(); addUserModal.show();"

                    type="button" style="margin-bottom:5px;margin-right:5px"
                    class="btn btn-success"><i class="fa fa-plus"></i>&nbsp; Add Member
            </button>

            <button
              type="button" style="margin-bottom:5px;margin-right:5px"
              (click)="applicationModal.show();getUserProjectApplications();"
              class="btn btn-info"><i class="fa fa-list-alt"></i>&nbsp;
              Member Applications
            </button>

            <button (click)="removeCheckedMembers(project_id)" type="button" style="margin-bottom:5px;"
                    [disabled]="checked_member_list.length <= 0 || remove_members_clicked" class="btn btn-danger"><i
              class="fa fa-trash"></i>&nbsp;Remove
              Members
            </button>

          </div>
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
              <tr>
                <th><input type="checkbox" id="selectAll" name="selectAll"
                           (change)="setAllMembersChecked();"
                           [checked]="allSet">
                </th>
                <th>User ID</th>
                <th>Member ID</th>
                <th>Full Name</th>
                <th>Actions</th>

              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let member of project_members" [ngStyle]="{'color':isPi(member)}">
                <td><input *ngIf="userinfo?.MemberId != member.MemberId" type="checkbox" id="{{member.Id}}"
                           name="{{member.Id}}"
                           [checked]="isMemberChecked(member.MemberId)" (change)="checkUnCheckMember(member.MemberId);">
                </td>
                <td>

                  {{ member.Id }}</td>
                <td>{{ member.MemberId }}</td>
                <td>{{ member.Username }}</td>
                <td>
                  <div class="btn-group-vertical" role="group" style="width:100%;">
                    <button *ngIf="!member.IsPi" (click)="promoteAdmin( project?.Id,member.Id,member.Username);
                                                notificationModal.show();
                                               " class="btn btn-secondary" type="button" style="margin: 2px">
                      <i class="fa fa-plus-circle"></i>&nbsp; Set Admin status
                    </button>
                    <button *ngIf="member.IsPi &&  userinfo?.MemberId != member.MemberId" (click)="removeAdmin( project?.Id,member.Id,member.Username);
                                                notificationModal.show();
                                               " class="btn btn-secondary" type="button" style="margin: 2px">
                      <i class="fa fa-minus-circle"></i>&nbsp; Remove Admin status
                    </button>
                    <button [id]="'remove_member_' + member.Username" *ngIf=" userinfo?.MemberId != member.MemberId"
                            (click)="removeMember(project?.Id,member.MemberId,member.Username);
                                                notificationModal.show();
                                               " class="btn btn-danger" type="button" style="margin: 2px">

                      <i class="fa fa-trash"></i>&nbsp; Remove member
                    </button>
                  </div>

                </td>
              </tr>

              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

</div>
   <div class="col"
           *ngIf="is_vo_admin && (project_application?.Status ==  application_states.APPROVED || project_application?.Status ==  application_states.MODIFICATION_REQUESTED  || project_application?.Status ==  application_states.MODIFICATION_DECLINED || project_application?.Status ==  application_states.MODIFICATION_DECLINED)">
        <div class="card">
          <div class="card-header">
            <i class="fa fa-align-justify"></i> Credit Usage history of {{project?.Name }}
          </div>
          <div class="card-body">
            <canvas #creditsChart
              id="creditsChart" width="400" height="400"
            >
            </canvas>
          </div>
      </div>
    </div>

<div bsModal #addUserModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Label"
     aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content ">
      <div class="modal-header">
        <h4 class="modal-title">Add member to the project {{project?.Name }}
        </h4>
        <button type="button" class="close" style="cursor:pointer" (click)="addUserModal.hide()"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <div class="container-fluid">
          <div class="row">
            <p style=" margin-bottom: 15px;">Search and add a user to your project by providing at least
              four characters of his name:</p>
          </div>
          <div class="row">
            <div class="col-md-8">
              <input style="width: 100%" placeholder="" id="add_member_input" #searchString>
            </div>
            <div class="col-md-4">
              <button type="button" class="btn btn-primary" id="search_member_btn"
                      (click)="filterMembers(searchString.value )"><i
                class="fa fa-search"></i> Search Member
              </button>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-12">
              <strong>Please note</strong> that if you can not find the user, he is not registered for a
              a de.NBI Cloud account. In that case you can invite him by sending him the following link:
              <br>
              <br>
              <ul style="list-style-type:none;">

                <li>
                  <pre [hidden]="showLink">{{invitation_link}}</pre>
                  <div class="btn-group-vertical">
                    <button class="btn btn-primary" style="margin-bottom: 5px" (click)="showLink = !showLink">
                      <span [hidden]="!showLink">Show</span>
                      <span [hidden]="showLink">Hide</span>
                      link
                    </button>
                    <button class="btn btn-success" (click)="copyToClipboard(invitation_link)">Copy link
                    </button>
                  </div>
                </li>
              </ul>
              <br>
              After the user registered for ELIXIR/de.NBI and applied for your group, you can approve his application.
              Read more about the process <a target="_blank" href="{{WIKI_GROUP_INVITATIONS}}">here</a>.
            </div>
          </div>

          <div class="table-responsive">
            <table *ngIf="filteredMembers!==null" class="table table-bordered table-striped table-sm">
              <thead>

              <th></th>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Email</th>
              </thead>
              <tbody *ngFor="  let member of filteredMembers">
              <td>
                <button style="padding: 5px; margin: 5px"
                        (click)="addMember(project?.Id,member['member_id'],member['firstName'],member['lastName']);filteredMembers=null; addUserModal.hide();notificationModal.show();"
                        class="btn btn-success" id="add_member_btn"><i class="fa fa-plus"></i> Add Member
                </button>
                <button style="padding: 5px; margin: 5px"
                        (click)="addAdmin(project?.Id,member['member_id'],member['user_id'],member['firstName'],member['lastName']);filteredMembers=null; addUserModal.hide();notificationModal.show();"
                        class="btn btn-primary"><i class="fa fa-plus"></i> Add Admin
                </button>
              </td>
              <td>{{member['firstName']}}</td>
              <td>{{member['lastName']}}</td>
              <td>{{member['mail']}}</td>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <!--  <button type="button" (click)="addUserModal.hide();
                                          notificationModal.show();
                                          addMember(addUserModalProjectID, addMemberID.value)" class="btn btn-success"><i class="fa fa-dot-circle-o"></i>
              Add User
          </button> -->
        <button type="button" (click)="filteredMembers=null; addUserModal.hide();"
                type="reset"
                class="btn  btn-danger"><i class="fa fa-ban"></i> Close
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div bsModal #applicationModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Applications for {{project?.Name}}</h4>
        <button type="button" class="close" style="cursor: pointer;" (click)="applicationModal.hide()"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <div *ngIf="!loaded" style="text-align: center"><i class="fa fa-spinner fa-spin"
                                                           style="font-size:100px; margin: auto;margin-left: auto;margin-right: auto"></i>
        </div>

        <div *ngIf="loaded" class="table-responsive">
          <table class="table table-bordered table-striped table-sm">
            <thead>

            <th>Name</th>
            <th>Date Submitted</th>
            <th>Actions {{project?.ProjectMemberApplications}}</th>
            </thead>
            <tbody *ngFor="  let application of project?.ProjectMemberApplications">

            <td>{{application.Name}}</td>
            <td>{{application.DateCreated}}</td>
            <td>
              <button
                (click)="approveMemberApplication(project?.Id,application.Id,application.Name); "
                class="btn btn-success"><i class="fa fa-check"></i> Approve
              </button>
              <button style="margin-left: 10px"
                      (click)="application_action='rejected';application_member_name=application.Name;rejectMemberApplication(project?.Id,application.Id,application.Name); "
                      class="btn btn-danger"><i class="fa fa-times"></i> Reject
              </button>
            </td>
            </tbody>
          </table>
        </div>
      </div>


      <div class="modal-footer">

        <p *ngIf="application_action_success && application_action_done" class="alert alert-success mr-auto">
          <strong>Success:</strong> Succesfully {{application_action}} the application of
          {{application_member_name}}.
        </p>
        <p *ngIf="!application_action_success && application_action_done && !application_action_error_message"
           class="alert alert-danger mr-auto">
          <strong>Failed:</strong> The application of {{application_member_name}} could not be
          {{application_action}} .
        </p>
        <p *ngIf="!application_action_success && application_action_done && application_action_error_message"
           class="alert alert-danger mr-auto">
          <strong>Failed:</strong> User didn't verify his email address yet. Please wait until the email is
          verified.
        </p>
        <button type="button" class="btn btn-primary"
                (click)="getUserProjectApplications()">
          Refresh
        </button>
        <button type="button" class="btn btn-secondary"
                (click)="application_action_error_message=null;;applicationModal.hide();">
          Close
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>


<div bsModal #notificationModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Label"
     aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="notification_title">{{ notificationModalTitle }}</h4>
        <button type="button" class="close" style="cursor:pointer" (click)="notificationModal.hide()"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="alert alert-{{ notificationModalType }}" role="alert">
          {{ notificationModalMessage }}
        </div>
      </div>
      <div class="modal-footer">
        <button *ngIf="notificationModalIsClosable == true" type="button"
                (click)="resetNotificationModal(); notificationModal.hide();" type="reset"
                class="btn  btn-secondary" id="close_notification"> Close
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div bsModal #infoModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-info modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Details</h4>
        <button type="button" class="close" style="cursor: pointer" (click)="infoModal.hide()"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <div *ngIf="!details_loaded" style="text-align: center"><i class="fa fa-spinner fa-spin"
                                                                   style="font-size:100px; margin: auto;margin-left: auto;margin-right: auto"></i>
        </div>
        <div class="table-responsive">
          <table *ngIf="details_loaded" class="table table-striped">
            <thead>
            <th>Description</th>
            <th>Date created (d/m/y)</th>
            <th>Expiration Date (d/m/y)</th>
            <th>Days running</th>
            <th>Lifetime in Days</th>
            </thead>
            <tbody>
            <td>
              <button class="btn btn-info"
                      (click)="infoModal.hide();descriptionModal.show();">Show
                Description
              </button>
            </td>

            <td>{{ project?.DateCreated }}</td>
            <td>{{project?.DateEnd}}</td>
            <td>{{ project?.DaysRunning }}</td>
            <td>{{project?.LifetimeDays}}</td>
            <td>
            </tbody>
          </table>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="infoModal.hide();">
          Close
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>


<div bsModal #descriptionModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-info" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Description</h4>
        <button type="button" class="close" style="cursor: pointer" (click)="descriptionModal.hide()"
                aria-label="Close">

          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <p>{{ project?.Description }}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary"
                (click)="descriptionModal.hide();">
          Close
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>


<div bsModal #deleteModal="bs-modal" class="modal fade" tabindex="-1"
     role="dialog" aria-labelledby="Label"
     aria-hidden="true"
     id="remove_application_modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Delete Application</h4>
        <button type="button" class="close" style="cursor:pointer"
                (click)="deleteModal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <div class="alert alert-warning" role="alert">
          Are you sure you want to remove this application?
        </div>

      </div>
      <div class="modal-footer">
        <button class="btn  btn-success col-md-4" id="confirm_remove_application_button"
                (click)="deleteApplication();deleteModal.hide();notificationModal.show()">
          Yes
        </button>
        <button class="btn  btn-danger col-md-4" type="reset"
                (click)="deleteModal.hide()">Cancel
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div bsModal #extensionModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="Label"
     aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4>Modification/Extension request for {{project_application?.Shortname}}</h4>
        <button type="button" class="close" style="cursor: pointer"
                (click)="extensionModal.hide(); setModalOpen(false);" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <div class="alert alert-info">
          <strong>Please be aware:</strong>
          If your last renewal or initial application was dated before flavor-categories
          where introduced, the data which is shown on the left side of the form might be
          misleading.
          This does not change the modification-request-process as it only
          serves as an additional information. You are only able to pick flavors which are
          currently available.
          <br><br>
          The number of flavors, GBs of storage and storage volumes which you enter within
          this request will be the numbers you will actually get.
          These numbers <strong>will not be added</strong> to your current numbers, but
          will <strong>replace them</strong>.
          <br><br>
          <strong>Choosing 0 additional months will only change the requested resources and will not prolong your
            project lifetime.</strong>
        </div>
        <form id="application_form" #f="ngForm" (ngSubmit)="onSubmit(f, false)"
              class="form-horizontal">


          <div class="form-group row">

            <label class="col-md-4 form-control-label" for="textarea-input">
              <strong>Lifetime* <i class="icon-question" data-toggle="tooltip"
                                   title="Current timespan of your project. You can extend your project by a maximum of 12 months">
              </i>
              </strong>
            </label>


            <div class="col">
              <div class="input-group">
                <input class="form-control"
                       name="project_application_lifetime" placeholder="NA"
                       type="text" value="{{life_time_string}}"
                       disabled>

              </div>
              <span class="help-block">Current lifetime</span>
            </div>

            <div class="col">
              <div class="input-group">
                <input class="form-control"
                       (change)="calculateCredits(f.controls.project_application_renewal_lifetime?.value);"
                       id="project_application_renewal_lifetime"
                       name="project_application_renewal_lifetime"
                       placeholder="e.g. 3"
                       type="number" min="0" max="12" step="1" ngModel required
                       appInteger appMinAmount="0" appMaxAmount="12"
                       [ngClass]="{
                                'is-invalid': f.controls.project_application_renewal_lifetime?.invalid && (f.controls.project_application_renewal_lifetime?.dirty || f.controls.project_application_renewal_lifetime?.touched),
                                'is-valid': f.controls.project_application_renewal_lifetime?.valid && (f.controls.project_application_renewal_lifetime?.dirty || f.controls.project_application_renewal_lifetime?.touched)
                                }">
                <div class="input-group-append">
                  <span class="input-group-text" style="padding: 0 !important;"> months</span>
                </div>
              </div>
              <span class="help-block">Number of months you want to extend the project </span>
            </div>
          </div>
          <div class="form-group row" *ngIf="project_application?.EdamTopics.length == 0 ">
            <label class="col-md-4 form-control-label" for="text-input"><strong>Research Topics* </strong></label>
            <div class="col-md-8">
              <div [ngClass]="{
                                'danger-border': selected_ontology_terms?.length <=0,
                                'success-border':selected_ontology_terms?.length >0
                                }">
                <ng-autocomplete #edam_ontology id="edam_input"
                                 [data]="edam_ontology_terms"
                                 [searchKeyword]="ontology_search_keyword"
                                 (selected)='selectEvent($event)'
                                 placeHolder="Please add your research topics"

                                 [itemTemplate]="itemTemplate"
                                 [notFoundTemplate]="notFoundTemplate">
                </ng-autocomplete>

                <ng-template #itemTemplate let-item>
                  <a [id]="item.term" [innerHTML]="item.term"></a>
                </ng-template>

                <ng-template #notFoundTemplate let-notFound>
                  <div [innerHTML]="notFound"></div>
                </ng-template>


              </div>
              <h5><span

                *ngFor="let term of selected_ontology_terms"
                style="margin-right: 5px; "
                class="badge badge-info"> {{term.term}}
                <span class="badge" style="cursor: pointer;" (click)="removeEDAMterm(term)">&#10060;</span>
 </span>

              </h5>
            </div>
          </div>

          <div class="form-group row">
            <h6 class="col-md-8 form-control-label">Resources*
              <i data-balloon="Select the number of Virtual Machines you want to run of each specific flavour"
                 data-balloon-pos="down">
                <i class="icon-question"></i></i>
            </h6>
          </div>


          <accordion>
            <ng-container *ngFor="let t of typeList, first as isFirst">
              <accordion-group *ngIf="project_application?.OpenStackProject || checkIfTypeGotSimpleVmFlavor(t)"
                               [isOpen]="isFirst" #groupval>
                <div accordion-heading style="width: 100%; cursor: pointer">
                  {{t.long_name}}
                  <i class="pull-right float-right" style="font-size: 25px" [ngClass]="{
                            'icon-arrow-up': groupval.isOpen, 'icon-arrow-down': !groupval.isOpen}"></i>
                </div>
                <div *ngFor="let fl of flavorList" class="form-group row">
                  <div
                    *ngIf="fl.type.shortcut == t.shortcut && (fl.simple_vm || project_application?.OpenStackProject)"
                    class="form-group row">
                    <label class="col-md-4 form-control-label"><strong>{{fl.name}}</strong><br>
                      Number of cores: <span
                        id="id_project_application_renewal_{{fl.name}}_cores">{{fl.vcpus}}</span><br>
                      RAM: <span id="id_project_application_renewal_{{fl.name}}_ram">{{fl.ram}}</span> GB</label>
                    <div class="col">
                      <div class="input-group">
                        <input class="form-control"
                               name="project_application_{{fl.name}}_old"
                               id="project_application_{{fl.name}}_old"
                               type="text"
                               value="{{project_application?.CurrentFlavors[fl.name]?.counter}}"
                               placeholder="0" disabled>
                        <div class="input-group-append"><span class="input-group-text"> VMs</span></div>
                      </div>
                      <span class="help-block">Currently approved of this type </span>
                    </div>
                    <div class="col">
                      <div class="input-group">
                        <input class="form-control"
                               (change)="valuesChanged(fl,name?.value);
                               calculateCredits(f.controls.project_application_renewal_lifetime?.value);"
                               id="id_project_application_renewal_{{fl.name}}"
                               name="project_application_renewal_{{fl.name}}"
                               type="number" min="0" step="1"
                               placeholder="e.g 1"
                               (ngModelChange)="onChangeFlavor($event)"
                               [ngModel]="project_application?.CurrentFlavors[fl.name]?.counter"
                               #name="ngModel"
                               appMinAmount="0" appIntegerOrNull
                               [ngClass]="{
                                'is-invalid': name?.invalid,
                                'is-valid': name?.valid
                                }">
                        <div class="input-group-append"><span class="input-group-text"> VMs</span></div>
                      </div>
                      <span class="help-block">Number of VMs you would like to run in the future</span>
                    </div>
                  </div>

                </div>
              </accordion-group>
            </ng-container>
          </accordion>
          <div class="form-group row">
            <label class="col-md-4 form-control-label" for="textarea-input"><strong>Number
              of storage
              volumes*
              <i
                data-balloon="Number of volumes allowed to create. The sum of the volumes size equals the value provided in the storage limit field."
                data-balloon-pos="down" data-balloon-length="large"><i
                class="icon-question"
                style="cursor: pointer;"></i></i></strong></label>
            <div class="col">
              <div class="input-group">
                <input required class="form-control"
                       name="project_application_volume_counter"
                       id="project_application_volume_counter"
                       placeholder="NA"
                       value="{{project_application?.VolumeCounter}}"
                       type="text" disabled>
              </div>
              <span class="help-block">Current number of storage volumes</span>
            </div>

            <div class="col">
              <div class="input-group">
                <input required class="form-control"
                       id="id_project_application_renewal_volume_counter"
                       name="project_application_renewal_volume_counter"
                       placeholder="e.g. 20"
                       type="number" min="0" step="1"
                       [ngModel]="project_application?.VolumeCounter"
                       appMinAmount="0" appInteger
                       [ngClass]="{
                                'is-invalid': f.controls.project_application_renewal_volume_counter?.invalid,
                                'is-valid': f.controls.project_application_renewal_volume_counter?.valid
                                }">
              </div>
              <span class="help-block">How many storage volumes do you need in the future?</span>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-4 form-control-label" for="textarea-input"><strong>Storage
              Limit*
              <i
                data-balloon="Storage limit is the sum of extra storage provided by volumes."
                data-balloon-pos="down" data-balloon-length="medium"><i
                class="icon-question"
                style="cursor: pointer;"></i></i></strong></label>
            <div class="col">
              <div class="input-group">
                <input class="form-control"
                       name="project_application_volume_limit"
                       id="project_application_volume_limit"
                       value="{{project_application?.VolumeLimit}}"
                       placeholder="NA"
                       type="text" disabled>
                <div class="input-group-append"><span class="input-group-text"> GB
                                    </span></div>
              </div>
              <span class="help-block">Current extra storage</span>
            </div>
            <div class="col">
              <div class="input-group">
                <input class="form-control"
                       id="id_project_application_renewal_volume_limit"
                       name="project_application_renewal_volume_limit"
                       placeholder="e.g. 20"
                       type="number" min="1" step="1" [ngModel]="project_application?.VolumeLimit"
                       appMinAmount="1" appInteger
                       [ngClass]="{
                                'is-invalid': f.controls.project_application_renewal_volume_limit?.invalid,
                                'is-valid': f.controls.project_application_renewal_volume_limit?.valid
                                }"
                       [disabled]="f.controls.project_application_renewal_volume_counter?.value == 0">
                <div class="input-group-append"><span class="input-group-text"> GB
                                    </span></div>
              </div>
              <span class="help-block">How much extra storage do you need in the future?</span>
            </div>
          </div>


          <div *ngIf="project_application?.OpenStackProject" class="form-group row">
            <label class="col-md-4 form-control-label" for="textarea-input"><strong>Object
              Storage* </strong><i
              data-balloon="Object storage is a method of storing data that does not use a directory tree internally. Object storage combines files with metadata and places it in a flat structure."
              data-balloon-pos="down" data-balloon-length="large"><i
              class="icon-question"
              style="cursor: pointer;"></i></i></label>

            <div class="col">
              <div class="input-group">
                <input class="form-control"
                       name="project_application_object_storage"
                       id="project_application_object_storage"
                       placeholder="NA"
                       value="{{project_application?.ObjectStorage}}"
                       type="text" disabled>
                <div class="input-group-append"><span class="input-group-text"> GB
                                    </span></div>
              </div>
              <span class="help-block">Current Object Storage capacity</span>
            </div>

            <div *ngIf="project_application?.OpenStackProject" class="col">
              <div class="input-group">
                <input class="form-control"
                       id="id_project_application_renewal_object_storage"
                       name="project_application_renewal_object_storage"
                       placeholder="e.g. 8"
                       [ngModel]="project_application?.ObjectStorage"
                       type="number" min="0" step="1" [ngModel]="0"
                       appInteger appMinAmount="0" required
                       [ngClass]="{
                                'is-invalid': f.controls.project_application_renewal_object_storage?.invalid ,
                                'is-valid': f.controls.project_application_renewal_object_storage?.valid
                                }">
                <div class="input-group-append"><span class="input-group-text"> GB
                                    </span></div>
              </div>
              <span class="help-block">How much Object Storage do you need in the future?</span>
            </div>
          </div>
          <div *ngIf="project_application?.OpenStackProject && project_application?.CloudService" class="form-group row">
            <label class="col-md-4 form-control-label" for="textarea-input"><strong>Cloud Service user number </strong><i
              data-balloon="Number of user using your service."
              data-balloon-pos="down" data-balloon-length="large"><i
              class="icon-question"
              style="cursor: pointer;"></i></i></label>

            <div class="col">
              <div class="input-group">
                <input class="form-control"
                       name="project_application_cloud_service_user_number"
                       id="project_application_cloud_service_user_number"
                       placeholder="NA"
                       value="{{project_application?.CloudServiceUserNumber}}"
                       type="text" disabled>
              </div>
              <span class="help-block">Current number of users</span>
            </div>

            <div *ngIf="project_application?.OpenStackProject && project_application?.CloudService" class="col">
              <div class="input-group">
                <input class="form-control"
                       id="id_project_application_renewal_cloud_service_user_number"
                       name="project_application_renewal_cloud_service_user_number"
                       placeholder="e.g. 200"
                       [ngModel]="project_application?.CloudServiceUserNumber"
                       type="number" min="0" step="1" [ngModel]="0"
                       appInteger appMinAmount="0" required
                       [ngClass]="{
                                'is-invalid': f.controls.project_application_renewal_cloud_service_user_number?.invalid ,
                                'is-valid': f.controls.project_application_renewal_cloud_service_user_number?.valid
                                }">
              </div>
              <span class="help-block">How many users are using your service?</span>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-md-4 form-control-label"
                   for="text-input"><strong>Comment</strong></label>
            <div class="col-md-8">
                <textarea type="text" id="id_project_application_renewal_comment"
                          name="project_application_renewal_comment" class="form-control"
                          maxlength="8192"
                          placeholder='' ngModel></textarea>
              <span class="help-block">Additional information you want to share?</span>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-4"></label>
            <div class="col-md-8">
              <div class="alert alert-primary" role="alert">
                In case you need additional and/or special resources, which are not available in the flavour selection,
                use the comment field to state so. The same applies to unusually large amounts of resources.
              </div>
            </div>
          </div>


          <strong>
            <div *ngIf="is_vo_admin" class="form-group row">
              <label #corenumbers id="creditnumber" class="col">Expected number of extra credits: <span id="extension_credits">{{extensionCredits}}</span></label>
            </div>
            <div class="alert alert-primary" role="alert">
              This is the expected number of extra credits that you get for your project. It accounts for an extended lifetime for a project
              and for an increase in requested resources.
            </div>
            <div class="form-group row">
              <label #corenumbers id="corenumbers" class="col">Number of total
                cores: <span id="total_cores">{{totalNumberOfCores}}</span></label>
            </div>
            <div class="form-group row">
              <label #ramnumbers id="ramnumbers" class="col">Amount of total
                RAM: <span id="total_ram">{{totalRAM}}</span> </label>
            </div>
          </strong>


        </form>
        <div *ngIf="f.invalid" class="alert alert-warning" role="alert">
          <p>Some required fields are incorrect or not filled in yet.
            Please check if all required (*) fields are filled in correctly.</p>
          <p *ngIf="f.controls.project_application_renewal_lifetime?.invalid">
            - Lifetime missing
          </p>
          <p *ngIf="f.controls.project_application_renewal_volume_counter?.invalid">
            - Number of storage volumes missing
          </p>
          <p *ngIf="f.controls.project_application_renewal_volume_limit?.invalid">
            - Storage Limit missing
          </p>
          <p *ngIf="f.controls.project_application_renewal_object_storage?.invalid">
            - Object Storage missing
          </p>
          <p *ngIf="!min_vm">
            - Select at least one Flavor
          </p>
          <p  *ngIf="project_application.EdamTopics.length == 0 && selected_ontology_terms.length < 1">
            - Select at least one Research Topic
          </p>
        </div>


        <div class="modal-footer">
          <div class="label">
            By submitting this application you agree to the cloud usage policy.
          </div>
          <button type="button" class="btn  btn-primary"
                  form="application_form" id="submit_renewal_btn"
                  (click)="extension_request=true;filterEnteredData(f);calculateCredits(f.controls.project_application_renewal_lifetime?.value);
                  submitModal.show(); setModalOpen(true);"
                  [disabled]="f.invalid || (!project_application.EdamTopics && selected_ontology_terms.length < 1)"><i
            class="fa fa-dot-circle-o">

          </i>
            Submit
          </button>
          <button type="button" class="btn btn-danger"
                  (click)="extensionModal.hide(); setModalOpen(false); totalRAM = 0; totalNumberOfCores = 0;">
            Close
          </button>

        </div>

      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</div>

<div bsModal #creditsExtensionModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="Label"
     aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4>Extra credits request for {{project_application?.Shortname}}</h4>
        <button type="button" class="close" style="cursor: pointer"
                (click)="creditsExtensionModal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="credits_application_form" #f2="ngForm" (ngSubmit)="onSubmit(f2, true)"
              class="form-horizontal">

          <div class="form-group row">
            <label class="col-md-4 form-control-label"
                   for="text-input"><strong>Reasons for Extension</strong></label>
            <div class="col-md-8">
                <textarea required type="text" id="project_application_extra_credits_comment"
                          name="project_application_extra_credits_comment" class="form-control"
                          maxlength="8192"
                          placeholder=''
                          [(ngModel)]="project_application_extra_credits_comment" minlength="10"
                          [ngClass]="{
                                'is-invalid': f2.controls.project_application_extra_credits_comment?.invalid && (f2.controls.project_application_extra_credits_comment?.dirty || f.controls.project_application_extra_credits_comment?.touched),
                                'is-valid': f2.controls.project_application_extra_credits_comment?.valid && (f2.controls.project_application_extra_credits_comment?.dirty || f.controls.project_application_extra_credits_comment?.touched)
                                }"
                          ></textarea>
              <span class="help-block">Please state why you need extra credits.</span>
              <div class="alert alert-info">
                As more credits are requested we require a more detailed description of the reasons!
              </div>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-4 form-control-label" for="textarea-input"><strong>Amount of extra credits needed</strong></label>
            <div class="col-md-8">

            <div class="input-group">
              <input required class="form-control"
                     id="project_application_extra_credits"
                     name="project_application_extra_credits"
                     placeholder="e.g. 5000"
                     (change)="updateExampleCredits(f2.controls.project_application_extra_credits?.value);"
                     [(ngModel)]="project_application_extra_credits" min="100" step="100" type="number"
                     appInteger appMinAmount="100"
                     [ngClass]="{
                                'is-invalid': f2.controls.project_application_extra_credits?.invalid && (f2.controls.project_application_extra_credits?.dirty || f2.controls.project_application_extra_credits?.touched),
                                'is-valid': f2.controls.project_application_extra_credits?.valid && (f2.controls.project_application_extra_credits?.dirty || f2.controls.project_application_extra_credits?.touched)
                                }">
              <div class="input-group-append"><span class="input-group-text"> Credits
                                    </span></div>
            </div>
            <span class="help-block">How many credits do you need for your project? You need 1 credit for 1 cpu core per hour and 0.28 credits for 1 GB of ram per hour.</span>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-4 form-control-label"><strong>Example</strong></label>
            <div class="col-md-8">
              <tr>
                <strong>
                  Runtime of exemplary VMs with the entered credits.
                  </strong>
              </tr>
              <tr>
                <td>Enough Credits to run 4 {{smallExampleFlavor?.name}} for {{smallExamplePossibleDays}} {{smallExamplePossibleHours}} hours <strong>non-stop</strong></td>
              </tr>
              <tr>
                <td>Enough Credits to run 1 {{largeExampleFlavor?.name}} for {{largeExamplePossibleDays}} {{largeExamplePossibleHours}} hours <strong>non-stop</strong></td>
              </tr>
            </div>
          </div>
        </form>
        <div *ngIf="f2.invalid" class="alert alert-warning" role="alert">
          <p>Some required fields are incorrect or not filled in yet.
            Please check if all required (*) fields are filled in correctly.</p>
          <p *ngIf="f2.controls.project_application_extra_credits_comment?.invalid">
            - No reason specified (at least 10 characters)
          </p>
          <p *ngIf="f2.controls.project_application_extra_credits?.invalid">
            - Number of extra credits not specified
          </p>
        </div>


        <div class="modal-footer">
          <div class="label">
            By submitting this application you agree to the cloud usage policy.
          </div>
          <button type="button" class="btn  btn-primary"adm
                  form="credits_application_form" id="submit_extra_credits_btn"
                  (click)="filterEnteredData(f2);onSubmit(f2, true);extension_request=true;creditsExtensionModal.hide()"
                  [disabled]="f2.invalid"><i
            class="fa fa-dot-circle-o">

          </i>
            Submit
          </button>
          <button type="button" class="btn btn-danger"
                  (click)="creditsExtensionModal.hide();">
            Close
          </button>

        </div>

      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</div>

<div bsModal #submitModal="bs-modal" class="modal fade" tabindex="-1"
     role="dialog" aria-labelledby="Label"
     aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{projectName}}</h4>
        <button type="button" class="close" style="cursor: pointer;"
                (click)="submitModal.hide(); setModalOpen(false);"
                data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>

      </div>
      <div class="modal-body">
        <div class="alert alert-info">
          <strong>Please check the data you have entered and confirm your application
            below.</strong><br>
          If the entered data mismatches with your requirements cancel this confirmation
          and take changes.
        </div>
        <div class="table-responsive">
          <table class="table table-striped">
            <tr *ngFor="let str of valuesToConfirm">
              <td>{{str}}</td>
            </tr>

            <tr *ngIf="is_vo_admin" >
              <td><strong>Approximate number of extra credits:
                {{extensionCredits.toString()}}</strong></td>
            </tr>
            <tr>
              <td><strong>Number of cores in total:
                {{totalNumberOfCores.toString()}}</strong></td>
            </tr>
            <tr>
              <td><strong>Value of RAM in total: {{totalRAM.toString()}} GBs</strong>
              </td>
            </tr>
          </table>
        </div>
      </div>


      <div class="modal-footer">


        <button id="submit_modal_btn" class="btn btn-success col-md4" type="button"
                (click)="extensionModal.hide(); submitModal.hide(); resultModal.show(); onSubmit(f);">Confirm Application
        </button>
        <button class="btn  btn-primary col-md-4" type="reset"
                (click)="submitModal.hide();">Cancel
        </button>

      </div>
    </div><!-- /.modal-content -->L
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
  <div bsModal #doiModal="bs-modal" class="modal fade" tabindex="-1"
       role="dialog" aria-labelledby="Label"
       aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Digital object identifier (DOI)</h4>
          <button type="button" class="close" style="cursor: pointer;"
                  (click)="doiModal.hide(); setModalOpen(false);"
                  data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>

        </div>
        <div class="modal-body">
          <div class="alert alert-info">
            <p>Please add the DOIs of new publications in this form. For more information on DOIs, please look <a
            href="https://cloud.denbi.de/wiki/citation_and_publication/"
            target="_blank">here</a>.
              You can also add the publications at a later date on the project overview page.</p>
            <p>The addition or non-addition of publications/DOIs <strong>does not affect the renewal request procedure!</strong></p>
          </div>
          <div class="table-responsive">
            <table class="table ">

              <tbody>
              <ng-container
                *ngFor="let doi of dois">
                <tr>
                  <td><a target="_blank" [href]="'https://doi.org/' + doi.identifier">{{doi.identifier}}</a></td>

                  <td>
                    <button
                      class="btn btn-danger" type="button" (click)="deleteDoi(doi);">
                      <i class="fa fa-trash"></i>&nbsp;
                    </button>
                  </td>

                </tr>
              </ng-container>

              <tr>
                <td><input style="width: 100%" type="text" required placeholder="e.g. 10.1000/182"
                           pattern="10.\d{4,9}\/[-._;()\/:a-zA-Z0-9]+" [(ngModel)]="newDoi" #doiInput></td>

                <td>
                  <button id="add_doi_btn"
                          (click)="addDoi();"
                          [disabled]="!doiInput.validity.valid"
                          type="button"
                          class="btn btn-success"><i class="fa fa-plus"></i>&nbsp;
                  </button>
                </td>

              </tr>
              </tbody>
            </table>

          </div>
          <div class="modal-footer" style="text-align:center;">
            <button id="doi_continue_btn" class="btn btn-success col-md-6" type="button"
                    style="margin:auto;" (click)="doiModal.hide(); extensionModal.show(); setModalOpen(true);">Continue
            </button>
          </div>
        </div><!-- /.modal-content -->L
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  </div>


  <div bsModal #doiQuestionModal="bs-modal" class="modal fade" tabindex="-1"
       role="dialog" aria-labelledby="Label"
       aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Publications</h4>
          <button type="button" class="close" style="cursor: pointer;"
                  (click)="doiQuestionModal.hide(); setModalOpen(false);"
                  data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>

        </div>
        <div class="modal-body">
          <div>
          <p><strong>Do you have any new publications that were made during your work with the de.NBI Cloud or
            in which the de.NBI Cloud is mentioned?</strong></p>
          </div>
          <div class="modal-footer">
            <div class="row" style="margin:auto">
              <div class="col-6">
                <button id="new_dois_btn" class="btn btn-success" type="button"
                        (click)="doiQuestionModal.hide(); doiModal.show(); setModalOpen(true)">Yes
                </button>
              </div>

              <div class="col-6">
                <button id="no_new_dois_btn" class="btn btn-primary" type="reset"
                        (click)="doiQuestionModal.hide(); extensionModal.show(); setModalOpen(true);">No
                </button>
              </div>
            </div>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  </div>


  <div bsModal #resultModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
         aria-labelledby="Label"
         aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" *ngIf="extension_status == 0">
              Waiting </h4>
            <h4 class="modal-title" *ngIf="extension_status == 1"> Success </h4>
            <h4 class="modal-title" *ngIf="extension_status == 2"> Error </h4>
            <button type="button" class="close" style="cursor: pointer"
                    (click)="resultModal.hide();extension_status= 0; setModalOpen(false);"
                    aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body">
            <div class="alert alert-info" role="alert" *ngIf="extension_status==0">
              Waiting... <i class="fa fa-spinner fa-spin"
                            style="font-size:24px"></i>
            </div>


            <div id="extension result" class="alert alert-success" role="alert" *ngIf="extension_status == 1">

              Modify request successfully submitted!
            </div>
            <div id="extension result" class="alert alert-success" role="alert" *ngIf="extension_status == 3">
              Modify request successfully approved!
            </div>
            <div id="extension result" class="alert alert-success" role="alert" *ngIf="extension_status == 4">
              Modify request successfully declined!
            </div>
            <div id="extension result" class="alert alert-success" role="alert" *ngIf="extension_status == 5">
              Modify request successfully approved and forwarded to facility!
            </div>

            <div id="extension result" class="alert alert-warning" role="alert" *ngIf="extension_status == 2">
              An error occured.

            </div>


            <div class="modal-footer">
              <button type="button" class="btn btn-secondary"
                      (click)="resultModal.hide();extension_status= 0; setModalOpen(false);">
                Close
              </button>
            </div>

          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
  </div>

    <div bsModal #informationModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
         aria-labelledby="infomodallabel"
         aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="information_modal_title">Information for {{project?.Name}}</h4>
            <button type="button" class="close" id="close_info_modal" style="cursor:pointer" (click)="informationModal.hide(); setModalOpen(false);"
                    aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                <tr>
                  <th></th>
                  <th>Project Name</th>
                  <th>Short Name</th>
                  <th>Lifetime</th>
                  <th>Date submitted</th>
                  <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <ng-container>
                  <tr>
                    <td>  <span *ngIf="project_application?.OpenStackProject"
                                style="font-size: 20px"
                                class="project-openstack_plain_white_redbg"
                                data-toggle="tooltip"
                                title="This is an Openstack project">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                  </span>
                      <span *ngIf="!project_application?.OpenStackProject"
                            style="font-size: 20px"
                            class="project-simpleVM_Logo_bluebg"
                            data-toggle="tooltip"
                            title="This is a Simple VM project">
                      <span class="path1"></span>
                      <span class="path2"></span>
                      <span class="path3"></span>
                      <span class="path4"></span>
                      <span class="path5"></span>
                    </span></td>
                    <td>{{ project_application?.Name }}
                    </td>
                    <td>{{project_application?.Shortname}}</td>
                    <td>{{ project_application?.Lifetime }}</td>
                    <td>{{ project_application?.DateSubmitted }}</td>
                    <td>{{ getStatusById(project_application?.Status) }}</td>
                  </tr>


                </ng-container>
                </tbody>
              </table>
              <app-application-detail [application]="project_application"></app-application-detail>

            </div>
          </div>
          <div class="modal-footer">
            <div class="row" style="margin:auto;">
              <button type="button" class="btn btn-secondary"
                      (click)="informationModal.hide(); setModalOpen(false);">Close</button>
            </div>
          </div>
      </div>
      </div>
    </div>
  </div>
